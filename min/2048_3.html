<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><style>@keyframes moveup{0%{transform:translateY(0);opacity:1}100%{transform:translateY(-150px);opacity:0}}@keyframes appear{0%{transform:scale(0)}100%{transform:scale(1)}}@keyframes add{0%{transform:scale(1);box-shadow:0 0 1px red}50%{transform:scale(1.2)}100%{transform:scale(1)}}</style><style>@font-face{font-family:"Clear Sans";font-style:normal}@font-face{font-family:"Clear Sans";font-style:normal}</style><style>*{margin:0;padding:0;box-sizing:border-box}body,html{font-family:"Clear Sans","Helvetica Neue",Arial,sans-serif;color:#776e65;font-size:18px;background:rgba(238,228,218,.5);overflow:hidden;height:100%}a{text-decoration:none;color:inherit;cursor:pointer}.container{position:relative;margin:0 auto;display:flex;flex-direction:column;width:450px;height:100vh;box-sizing:content-box}.heading{margin:20px 0}.heading{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}h1.title{font-size:74px;line-height:66px;font-weight:700}.scores-container{float:right}.best-container,.score-container{float:left;padding:3px 20px;background:#bbada0;border-radius:3px;font-size:25px;font-weight:700;color:#fff;text-align:center}.score-container{position:relative;margin-right:15px;margin-bottom:5px}.best-container .title,.score-container .title{font-size:13px;color:#eee4da}.score-addition{position:absolute;left:0;bottom:0;width:100%;color:rgba(119,110,101,.9);z-index:100;opacity:0;font-size:1rem}.score-addition.action{animation:2s moveup}.above-game{font-size:.9rem}.restart-btn{margin:5px 0 0 5px;float:right;padding:0 8px;background:#8f7a66;color:#fff;height:40px;line-height:40px;border-radius:3px;font-weight:700}h2.subtitle{font-size:1em}.game-container{position:relative;margin-top:15px;width:450px;height:450px;background:#bbada0;border-radius:6px;touch-action:none}.grid-container,.pop-container,.tile-container{position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;width:426px;height:426px}.grid-row{display:flex;margin-bottom:2%}.grid-row,.tile{height:23.5%}.grid-cell,.tile{width:23.5%;border-radius:3px}.grid-cell{margin-right:2%;background:rgba(238,228,218,.35)}.grid-cell:nth-of-type(4n){margin-right:0}.tile{position:absolute;display:flex;align-items:center;justify-content:center;font-size:53px;font-weight:700;background:#eee4da;transition:all .15s ease}.tile.new-tile{animation:.5s appear}.tile.addition{animation:.3s add}.tile[data-val]{color:#f9f6f2}.tile[data-val="2"],.tile[data-val="4"]{color:#776e65}.tile[data-val="128"],.tile[data-val="256"],.tile[data-val="512"]{font-size:45px}.tile[data-val="1024"],.tile[data-val="2048"]{font-size:33px}.tile[data-val="4"]{background:#ede0c8}.tile[data-val="8"]{background:#f2b179}.tile[data-val="16"]{background:#f59563}.tile[data-val="32"]{background:#f67c5f}.tile[data-val="64"]{background:#f65e3b}.tile[data-val="128"]{background:#edcf72}.tile[data-val="256"]{background:#edcc61;box-shadow:0 0 30px 10px rgba(243,215,116,.31746),inset 0 0 0 1px rgba(255,255,255,.19048)}.tile[data-val="512"]{background:#edc850;box-shadow:0 0 30px 10px rgba(243,215,116,.39683),inset 0 0 0 1px rgba(255,255,255,.2381)}.tile[data-val="1024"]{background:#edc53f;box-shadow:0 0 30px 10px rgba(243,215,116,.47619),inset 0 0 0 1px rgba(255,255,255,.28571)}.tile[data-val="2048"]{background:#edc22e;box-shadow:0 0 30px 10px rgba(243,215,116,.55556),inset 0 0 0 1px rgba(255,255,255,.33333)}.pop-container{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;background:rgba(238,228,218,.8);z-index:100;opacity:0;transition:all 1s ease}.winning-container p:nth-child(1){transform:rotate(90deg)}.winning-container.action p:nth-child(1){transform-origin:center;animation:winning 1.5s infinite}.failure-container.action p:nth-child(1){transform-origin:center;animation:failure 5s infinite}@keyframes winning{0%,100%,25%,50%,75%{transform:rotate(90deg) translateX(-5px)}12.5%{transform:rotate(80deg)}37.5%{transform:rotate(70deg)}62.5%{transform:rotate(100deg)}87.5%{transform:rotate(120deg)}}@keyframes failure{0%,100%,25%,50%,75%{transform:rotate(90deg) scale(.7,1) rotateX(40deg)}12.5%{transform:rotate(90deg)}37.5%{transform:rotate(90deg)}62.5%{transform:rotate(90deg)}87.5%{transform:rotate(90deg)}}.pop-container.action{opacity:1}.pop-container p{font-size:60px;font-weight:700}.footer{flex:1;padding:10px 0;text-align:center;display:flex;justify-content:space-around;align-items:flex-end;font-size:.75rem;color:#333;opacity:.7}</style><style>@media screen and (max-width:1250px){body,html{font-size:15px}.container{width:280px}h1.title{font-size:31px}.best-container,.score-container{padding:3px 10px}.game-container{margin-top:10px;width:280px;height:280px}.grid-container,.tile-container{width:260px;height:260px}.grid-row,.tile{height:22.75%}.grid-cell,.tile{width:22.75%}.grid-row{margin-bottom:3%}.grid-cell{margin-right:3%}.tile{font-size:35px}.tile[data-val="128"],.tile[data-val="256"],.tile[data-val="512"]{font-size:25px}.tile[data-val="1024"],.tile[data-val="2048"]{font-size:21px}.pop-container p{font-size:30px}}</style><link rel="shortcut icon" href="data:image/vnd.microsoft.icon;base64,AAABAAEAICAAAAEAIACoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAgBAAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAADE7E4AxOy+AMTs9ADE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz0AMTsvgDE7E0AAAAAAAAAAAAAAAAAxOyEAMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7IQAAAAAAMTsTQDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7E0AxOy+AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTsvgDE7PIAxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOzzAMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/Iszv/yLM7/8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/Iszv/yLM7/8RyO3/AMTs/wDE7P8AxOz/AMTs/5nn9////////////////////////////6rr+f8AxOz/Iszv/+77/v////////////////9E1PH/AMTs/wDE7P8AxOz/AMTs/wDE7P+Z5/f//////xHI7f8AxOz/RNTx//////////////////////+Z5/f/AMTs/wDE7P8AxOz/mef3/////////////////+77/v//////mef3/wDE7P/d9/z//////933/P/M8/v///////////8AxOz/iOP2/7vv+v+q6/n/quv5/+77/v//////u+/6/xHI7f/u+/7//////7vv+v+Z5/f///////////9E1PH/AMTs/wDE7P8AxOz/u+/6///////u+/7/Ecjt/wDE7P8AxOz/Ecjt////////////AMTs/wDE7P/u+/7//////0TU8f//////////////////////////////////////Ecjt/+77/v//////AMTs/wDE7P+77/r//////1XY8v8AxOz/AMTs/wDE7P8AxOz/quv5////////////Ecjt/wDE7P8RyO3//////+77/v8AxOz/AMTs/6rr+f//////Vdjy/6rr+f//////zPP7/xHI7f+77/r//////0TU8f8AxOz/3ff8//////+q6/n/Ztz0////////////Iszv/wDE7P8AxOz/AMTs/wDE7P8AxOz/zPP7///////d9/z/AMTs/xHI7f//////7vv+/wDE7P8AxOz/quv5//////9V2PL/AMTs/933/P//////M9Dw/5nn9///////Ecjt/wDE7P8RyO3//////////////////////2bc9P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz///////////8z0PD/Ecjt///////u+/7/AMTs/wDE7P+q6/n//////1XY8v8AxOz/Ecjt////////////u+/6//////8RyO3/AMTs/4jj9v//////7vv+/8zz+///////3ff8/wDE7P8AxOz/AMTs/xHI7f+q6/n/Vdjy/wDE7P/M8/v//////1XY8v8RyO3///////////8z0PD/Ecjt////////////M9Dw/wDE7P8AxOz/RNTx/////////////////xHI7f8AxOz/zPP7//////8z0PD/AMTs////////////Iszv/wDE7P8AxOz/Vdjy////////////////////////////Ecjt/wDE7P934PX//////////////////////7vv+v8AxOz/AMTs/wDE7P8AxOz/iOP2////////////Ecjt/wDE7P+I4/b///////////////////////////8AxOz/AMTs/wDE7P8AxOz/M9Dw/5nn9/+q6/n/mef3/xHI7f8AxOz/AMTs/wDE7P9E1PH/quv5/7vv+v9m3PT/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/Ztz0/3fg9f8RyO3/AMTs/wDE7P9V2PL/quv5/6rr+f934PX/Ecjt/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOzyAMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs8gDE7L4AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOy+AMTsTADE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7E0AAAAAAMTshADE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOyEAAAAAAAAAAAAAAAAAMTsTQDE7L4AxOzzAMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7PMAxOy+AMTsTAAAAAAAAAAAwAAAA4AAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAcAAAAM="><title>2048</title></head><body><div class=container><div class=heading><h1 class=title><a href="">2048</a></h1><div class=scores-container><div class=score-container><p class=title>得分</p><p class=score>0</p><div class=score-addition>+4</div></div><div class=best-container><p class=title>最佳</p><p class=score>66666</p></div></div></div><div class=game-intro><a href="" class=restart-btn>重新开始</a><h2 class=subtitle>在线玩 2048 游戏</h2><p class=above-game>连接数字并到达<strong>2048</strong>图块！</p></div><div class=game-container><div class=grid-container><div class=grid-row><div class=grid-cell></div><div class=grid-cell></div><div class=grid-cell></div><div class=grid-cell></div></div><div class=grid-row><div class=grid-cell></div><div class=grid-cell></div><div class=grid-cell></div><div class=grid-cell></div></div><div class=grid-row><div class=grid-cell></div><div class=grid-cell></div><div class=grid-cell></div><div class=grid-cell></div></div><div class=grid-row><div class=grid-cell></div><div class=grid-cell></div><div class=grid-cell></div><div class=grid-cell></div></div></div><div class=tile-container></div><div class="failure-container pop-container"><p>:(</p><p>失败</p></div><div class="winning-container pop-container"><p>:)</p><p>胜利</p></div></div><div class=footer><span>Crafted with by <a href=https://gd4ark.github.io/about/ >@4Ark</a>/<a href=https://github.com/gd4Ark/2048>GitHub</a></span></div></div><script>var config={bonus_point:4,max:2048}</script><script>var data={score:0,best:0,cell:[]},indexs=[[[0,1,2,3],[4,5,6,7],[8,9,10,11],[12,13,14,15]],[[0,4,8,12],[1,5,9,13],[2,6,10,14],[3,7,11,15]],[[3,2,1,0],[7,6,5,4],[11,10,9,8],[15,14,13,12]],[[12,8,4,0],[13,9,5,1],[14,10,6,2],[15,11,7,3]]]</script><script>var log=console.log.bind(console),random=function(o,t){o=void 0===o?0:o,t=void 0===t?1:t,t+=1;t=Math.random()*(t-o)+o;return Math.floor(t)},$=function(o){return document.querySelectorAll(o)},on=function(o,t,e){o.addEventListener(t,function(o){e(o)})},indexToPos=function(o){return{x:o%4,y:Math.floor(o/4)}},getLocalStorage=function(o){return localStorage[o]?JSON.parse(localStorage[o]):null},touchMoveDir=function(o,n,r){var a,c={beforeX:0,beforeY:0,afterX:0,afterY:0},u=!1;on(o,"touchstart",function(o){c.beforeX=o.touches[0].clientX,c.beforeY=o.touches[0].clientY}),on(o,"touchmove",function(o){u=!0,c.afterX=o.touches[0].clientX,c.afterY=o.touches[0].clientY}),on(o,"touchend",function(o){var t,e;u&&(log(t=c.beforeX-c.afterX,e=c.beforeY-c.afterY),Math.abs(t)<n&&Math.abs(e)<n||(a=Math.abs(t)>Math.abs(e)?0<t?0:2:0<e?1:3,u=!1,r(a)))})}</script><script>function event(e){var o=!1,n=$(".game-container")[0];on(window,"keydown",function(n){o||(o=!0,0<=(n=n.keyCode-37)&&n<=3&&e.move(n))}),on(window,"keyup",function(){o=!1}),touchMoveDir(n,15,function(n){e.move(n)}),on($(".restart-btn")[0],"click",function(n){n.preventDefault(),e.restart()}),on(window,"resize",function(){e.view.resize()})}</script><script>var View=(()=>{function t(){}var n=$(".tile-container")[0],e=($(".score-container")[0],$(".score-container .score")[0]),i=$(".score-addition")[0],a=$(".best-container .score")[0],o=$(".failure-container")[0],s=$(".winning-container")[0];return t.prototype={setup:function(){o.classList.remove("action"),s.classList.remove("action"),this.updateScore(data.score),this.updateBest()},restart:function(){n.innerHTML=""},resize:function(){var n=this;data.cell.forEach(function(t,e){var i=n.getTile(e);i&&(e=n.getPos(indexToPos(e)),n.setPos(i,e))})},failure:function(){o.classList.add("action")},winning:function(){s.classList.add("action")},restoreTile:function(){var i=this;data.cell.forEach(function(t,e){0!==t.val&&i.appear(e)})},addScoreAnimation:function(t){t&&(i.innerHTML="+"+t,i.classList.add("action"),setTimeout(function(){i.classList.remove("action")},500))},updateScore:function(t){e.innerHTML=data.score,this.addScoreAnimation(t)},updateBest:function(){a.innerHTML=data.best},setInfo:function(t,e,i){t.style.left=e.left+"px",t.style.top=e.top+"px",t.setAttribute("data-index",i)},getTile:function(t){return $(`.tile[data-index='${t}']`)[0]},getPos:function(t){t=$(`.grid-row:nth-child(${t.y+1}) .grid-cell:nth-child(${t.x+1})`)[0];return{left:t.offsetLeft,top:t.offsetTop}},setPos:function(t,e){t.style.left=e.left+"px",t.style.top=e.top+"px"},createTileHTML:function(t){var e=document.createElement("div");return e.className=t.classNames,e.innerHTML=t.val,e.setAttribute("data-index",t.index),e.setAttribute("data-val",t.val),this.setPos(e,t.pos),e},appear:function(t){var e=data.cell[t],i=this.getPos(indexToPos(t)),e=this.createTileHTML({val:e.val,pos:i,index:t,classNames:" tile new-tile"});n.appendChild(e)},remove:function(t){t=this.getTile(t);t.parentElement.removeChild(t)},move:function(t,e){var t=this.getTile(t),i=this.getPos(indexToPos(e));this.setInfo(t,i,e)},updateVal:function(t){var e=this.getTile(t),t=data.cell[t].val;e.setAttribute("data-val",t),e.innerHTML=t,e.classList.add("addition"),setTimeout(function(){e.classList.remove("addition"),e.classList.remove("new-tile")},300)}},t})()</script><script>var Game=(()=>{function t(t){}var i=data.cell,o=!1,r=!1;return t.prototype={init:function(t){var e=this,t=(this.view=t,this.getHistory());t?this.restoreHistory(t):(this.initCell(),this.start()),this.setBest(),setTimeout(function(){e.view.setup()})},start:function(){for(var t=0;t<2;t++)this.randomAddItem()},restart:function(){var t=this;o=!1,this.initCell(),this.view.restart(),this.start(),data.score=0,this.save(),setTimeout(function(){t.view.setup()})},save:function(){localStorage.bestScore=data.best,localStorage.gameState=JSON.stringify({cell:data.cell,socre:data.score})},winning(){o=!0,localStorage.gameState="",this.view.winning()},checkWinning(){i.find(function(t){return t.val===config.max})&&this.winning()},failure:function(){o=!0,localStorage.gameState="",this.view.failure()},checkfailure:function(){function t(t,e){i=i||t.some(function(t){return n.checkSame(t)})}var n=this,i=!1;t(this.chunkX()),t(this.chunkY()),setTimeout(function(){i||n.failure()})},checkSame:function(t,e){return same=t.some(function(t,e,n){if(e!==n.length-1)return t.val===n[e+1].val})},setBest:function(){var t=getLocalStorage("bestScore");data.best=t||0},getHistory:function(){var t=getLocalStorage("gameState");if(t&&t.socre&&t.cell)return t},restoreHistory:function(t){data.cell=t.cell,data.score=t.socre,i=data.cell,this.view.restoreTile()},initCell:function(){for(var t=0;t<16;t++)i[t]={val:0,index:t}},addScore:function(t){data.score+=t,data.best<data.score&&(data.best=data.score,this.view.updateBest()),this.view.updateScore(t)},chunkX:function(){for(var t=[],e=0;e<i.length;e+=4)t.push(i.slice(e,e+4));return t},chunkY:function(){for(var t=this.chunkX(),e=[[],[],[],[]],n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)e[i][n]=t[n][i];return e},arrayInnerReverse:function(n){return n.forEach(function(t,e){n[e]=t.reverse()}),n},updatePos:function(t,e){return i[e].val=i[t].val,i[t].val=0,r=!0,t},updateVal:function(t,e){var n=this;i[t].val=e,setTimeout(function(){n.view.updateVal(t)},0)},updateItem:function(t,e){i[t]!==i[e]&&(t=this.updatePos(t,e),this.view.move(t,e))},removeItem:function(t){i[t].val=0,this.view.remove(t)},getSum:function(t,e,n){return t[e].val+t[n].val},move:function(n){var i,a,t,e;if(!o)return i=this,t=!1,e=[],(a=0)===n||2===n?e=this.chunkX():1!==n&&3!==n||(e=this.chunkY()),(e=2!==n&&3!==n?e:this.arrayInnerReverse(e)).forEach(function(t,e){t=i.moving(t,indexs[n][e]);a+=t.score}),this.addScore(a),r&&(this.randomAddItem(),r=!(t=!0)),this.save(),this.checkWinning(),this.isFull()&&this.checkfailure(),{move:t}},mergeMove:function(t,e,n,i,a){var o=this.getSum(t,n,i);this.removeItem(t[n].index),this.updateItem(t[i].index,e[a]),this.updateVal(e[a],o)},normalMove:function(n,i){var a=this;n.forEach(function(t,e){a.updateItem(n[e].index,i[e])})},moving:function(t,e){var n=this,i=0,a=t.filter(function(t){return 0!==t.val});return 0===a.length?{score:0}:([function(){n.normalMove(a,e)},function(){a[0].val===a[1].val?(n.mergeMove(a,e,0,1,0),i+=config.bonus_point):n.normalMove(a,e)},function(){a[0].val===a[1].val?(n.mergeMove(a,e,0,1,0),n.updateItem(a[2].index,e[1]),i+=config.bonus_point):a[1].val===a[2].val?(n.updateItem(a[0].index,e[0]),n.mergeMove(a,e,1,2,1),i+=config.bonus_point):n.normalMove(a,e)},function(){a[0].val===a[1].val?(n.mergeMove(a,e,0,1,0),i+=config.bonus_point,a[2].val===a[3].val?(n.mergeMove(a,e,2,3,1),i+=config.bonus_point):(n.updateItem(a[2].index,e[1]),n.updateItem(a[3].index,e[2]))):a[1].val===a[2].val?(n.mergeMove(a,e,1,2,1),n.updateItem(a[3].index,e[2]),i+=config.bonus_point):a[2].val===a[3].val&&(n.mergeMove(a,e,2,3,2),i+=config.bonus_point)}][a.length-1](),{score:i})},isFull:function(){return 0===i.filter(function(t){return 0===t.val}).length},randomAddItem:function(){if(!this.isFull())for(;;){var t=random(0,data.cell.length-1);if(!(0!==data.cell[t].val)){this.addItem(t,2);break}}},addItem:function(t,e){data.cell[t]={val:e,index:t},this.view.appear(t)}},t})()</script><script>on(window,"load",function(){var n=new View,e=new Game;e.init(n),event(e)})</script></body></html>