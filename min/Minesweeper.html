<!DOCTYPE html><html lang=zh><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>扫雷-极简版</title><style>*{padding:0;margin:0}.container{margin:150px auto;display:flex;flex-direction:column;justify-content:center;align-items:center}.container .row1,.container .row2{display:flex;justify-content:space-around;align-items:center;margin:10px}.container .row1 button:last-child{margin:0}.container .row2 .bombinfo{width:110px;height:40px;background-color:#02a4ad;color:#fff;border-radius:5px;line-height:40px;text-align:center;font-size:14px}button{width:80px;height:40px;background-color:#02a4ad;border:none;border-radius:5px;outline:0;cursor:pointer;color:#fff;margin-right:5px}button.refresh{margin-right:20px}button.active{background-color:#00abff}.bombNum{color:#90ee90}table{background-color:#929196}.cube{width:25px;height:25px;line-height:25px;border:2px solid;border-color:#fff #a1a1a1 #a1a1a1 #fff;text-align:center;font-size:19px;cursor:pointer;background:#ccc}.zero{border-color:#ccc;cursor:default}.one{color:#00abff}.two{color:#555fff}.three{color:coral}.four{color:#ff3eff}.icon{width:23px;height:23px;font-size:22px;vertical-align:-.15em;fill:currentColor;overflow:hidden}</style></head><body><div class=container><div class=infobox><div class=row1><button class="easy active">初级</button> <button class=normal>中级</button> <button class=hard>高级</button></div><div class=row2><button class=refresh>重新开始</button><div class=bombinfo><span>剩余雷数：<span class=bombNum></span></span></div></div></div><div class=gamebox><table><tbody></tbody></table></div></div><script>var rowNumber,table=document.querySelector("table"),flag_html='<svg class="icon" aria-hidden="true">\n                                    <use xlink:href="#icon-qizi"></use>\n                                 </svg>',bomb_html='<svg class="icon" aria-hidden="true">\n                                    <use xlink:href="#icon-Bomb"></use>\n                                 </svg>',tds=[],cubes=[],flag_arr=[];function initTable(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:10;table.querySelector("tbody").innerHTML="",cubes=[],flag_arr=[];for(var r=0;r<e;r++){for(var t=document.createElement("tr"),n=0;n<e;n++){var a=document.createElement("td");a.classList.add("cube"),t.append(a),cubes.push({row:r,col:n,value:"",check:!1})}table.querySelector("tbody").appendChild(t)}rowNumber=e,tds=table.querySelectorAll("td"),table.addEventListener("mousedown",table_mouse)}initTable();var bomb_arr=[];function random_bomb(){for(var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:10,r=[],t=0;t<cubes.length;t++)r[t]=t;for(var n in r.sort((function(){return.5-Math.random()})),bomb_arr=r.slice(0,e))cubes[bomb_arr[n]].value="bomb";document.querySelector(".bombNum").innerHTML=e}function table_mouse(e){if("TABLE"!=e.target.tagName){var r=get_my_index(e.target);if(2==e.button){var t=document.querySelector(".bombNum");if("TD"!=e.target.tagName||e.target.innerHTML?"svg"==e.target.tagName&&(e.target.parentNode.innerHTML="",t.innerText++):(e.target.innerHTML=flag_html,flag_arr.push(r),t.innerText--,cubes[r].check=!0),0==t.innerText){for(var n in flag_arr)if("bomb"!==cubes[flag_arr[n]].value)return gameover();alert("全部命中！您就是排雷大师！")}}else"bomb"==cubes[r].value?gameover(e.target):click_td(r)}}function click_td(e){(test_around_bomb(e),td_dom_operate(e),cubes[e].value)||get_around_index(e).forEach((function(e){cubes[e].check||click_td(e)}))}function get_around_index(e){for(var r=[],t=cubes[e].row,n=cubes[e].col,a=t-1;a<=t+1;a++)for(var o=n-1;o<=n+1;o++)a<0||o<0||a>=rowNumber||o>=rowNumber||r.push(a*rowNumber+o);return r}function test_around_bomb(e){var r=get_around_index(e),t=0;r.forEach((function(e){"bomb"==cubes[e].value&&t++})),cubes[e].value=t,cubes[e].check=!0}function td_dom_operate(e){var r=tds[e],t=cubes[e].value;r.innerHTML=t||"";var n=t>4?4:t;r.classList.add(["zero","one","two","three","four"][n])}function get_my_index(e){for(var r in tds)if(tds[r]===e)return r}function gameover(e){table.removeEventListener("mousedown",table_mouse),bomb_arr.map((function(e){tds[e].innerHTML!==flag_html&&(tds[e].innerHTML=bomb_html)})),e?(e.style.backgroundColor="lightcoral",alert("嘭，是(╯‵□′)╯炸弹！•••*～●")):alert("很可惜，旗子用完了，你没能完成任务！")}random_bomb(),table.addEventListener("contextmenu",(function(e){e.preventDefault()})),table.addEventListener("mousedown",table_mouse);</script><script>var btns=document.querySelectorAll(".infobox .row1 button"),difficulty="easy";document.querySelector(".infobox .row1").addEventListener("click",(function(e){if("BUTTON"==e.target.tagName){var t=document.querySelector("button.active");switch(t&&t.classList.remove("active"),e.target){case btns[0]:difficulty="easy",initTable(10),random_bomb(10);break;case btns[1]:difficulty="normal",initTable(15),random_bomb(20);break;case btns[2]:difficulty="hard",initTable(20),random_bomb(40)}e.target.classList.add("active")}})),document.querySelector(".row2 .refresh").addEventListener("click",(function(){switch(difficulty){case"easy":initTable(10),random_bomb(10);break;case"normal":initTable(15),random_bomb(20);break;case"hard":initTable(20),random_bomb(40)}}));</script></body></html>