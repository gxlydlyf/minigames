<!DOCTYPE html><html lang=zh><head><meta charset=UTF-8><meta name=apple-mobile-web-app-title content=Cooli><title>2048 by Abhiraj</title><style>#container,#menu{position:absolute}#end,#home,#load,.opt,.opt::after,.opt::before{box-sizing:border-box}body,html{background:#263238;height:100%;margin:0;overflow:hidden;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}#container>*,label{-moz-user-select:none;-moz-user-select:-moz-none;-ms-user-select:none;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}#backcanvas,#canvas,#end,#home,#load{display:block;height:100%;left:0;position:absolute;top:0;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);width:100%}#backcanvas{background:#455a64}#end,#home,#load{background:rgba(0,0,0,.5);color:#fff;cursor:default;font:300 64px/96px "Segoe UI","Helvetica Neue",sans-serif;height:1080px;padding:0 100px;transform-origin:0 0;width:1920px}#load+#home{display:none}#end>*,#home>*,#load>*{margin:40px 0}h1{font:300 96px/1 "Segoe UI","Helvetica Neue",sans-serif;margin-top:80px;text-shadow:2px 0 0 red,-2px 0 0 #0ff}p{text-shadow:1px 0 0 red,-1px 0 0 #0ff}#reset,#start{-webkit-animation:blink .7s steps(2,start) infinite;animation:blink .7s steps(2,start) infinite;background:#e1ff5f;border-radius:2px;color:#202020;cursor:pointer;display:inline-block;font-size:48px;font-weight:700;outline:4px;outline-offset:4px;padding:40px 120px}#reset:hover,#start:hover,.opt::after{background:#fff}@-webkit-keyframes blink{to{outline:#e1ff5f solid 4px}}@keyframes blink{to{outline:#e1ff5f solid 4px}}#menu{right:0;top:0;transform:translate3d(0,0,0);width:550px}.opt{-webkit-appearance:none;height:48px;margin:0 10px;outline:0;position:relative;width:80px}.opt::after,.opt::before{border-radius:100px;content:"";display:inline-block;transition:all .2s}.opt::after{border:2px solid #607d8b;height:40px;left:4px;position:absolute;top:4px;width:40px}.opt::before{background:#b0bec5;height:48px;width:80px}.opt:checked::after{left:36px}.opt:checked::before{background:#c6ff00}label{color:#eeff41}body.mobile #menu>*{display:none}#q{display:inline-block!important}#q+label{display:inline!important}</style></head><body translate=no><div id=container><canvas id=backcanvas></canvas><canvas id=canvas></canvas><div id=load><h1>Loading</h1></div><div id=home><h1>2048 by Abhiraj</h1><p><b>怎么玩！</b><br>❖ 拖动碎片<br>❖ 相同编号的堆叠起来<br>❖ 到达2048即可赢得比赛</p><div id=start>开始游戏</div><div id=menu><input type=checkbox class=opt id=m checked=checked><label for=m>音乐</label><br><input type=checkbox class=opt id=s checked=checked><label for=s>音效</label><br><input type=checkbox class=opt id=q checked=checked><label for=q>高画质</label></div></div><div id=end style=display:none><h1>你赢了</h1><p><b>来狂欢吧！</b></p><div id=reset>再玩一次</div></div></div><script id=rendered-js>(()=>{function t(){this.A=function(t){for(var e=0;e<24;e++)this[String.fromCharCode(97+e)]=t[e]||0;this.c<.01&&(this.c=.01),(t=this.b+this.c+this.e)<.18&&(this.b*=t=.18/t,this.c*=t,this.e*=t)}}var r=new function(){var H,W,V,X,Y,G,J,K,Q,Z,$,t0;this.z=new t,this.reset=function(){var t=this.z;X=100/(t.f*t.f+.001),Y=100/(t.g*t.g+.001),G=1-.01*t.h*t.h*t.h,J=1e-6*-t.i*t.i*t.i,t.a||($=.5-t.n/2,t0=5e-5*-t.o),K=1+t.l*t.l*(0<t.l?-.9:10),Q=0,Z=1==t.m?0:2e4*(1-t.m)*(1-t.m)+32},this.C=function(){this.reset();var t=this.z;return 3*(((H=1e5*t.b*t.b)+(W=1e5*t.c*t.c)+(V=1e5*t.e*t.e+12))/3|0)},this.B=function(t,e){for(var n,o,s,i,r=1!=(w=this.z).s||w.v,a=.1*w.v*w.v,c=1+3e-4*w.w,f=.1*w.s*w.s*w.s,l=1+1e-4*w.t,h=1!=w.s,_=w.x*w.x,d=w.g,u=w.q||w.r,p=.2*w.r*w.r*w.r,N=w.q*w.q*(w.q<0?-1020:1020),v=w.p?32+(2e4*(1-w.p)*(1-w.p)|0):0,F=w.d,x=w.j/2,U=.01*w.k*w.k,y=w.a,m=H,O=1/H,j=1/W,z=1/V,w=1-(w=.8<(w=5/(1+20*w.u*w.u)*(.01+f))?.8:w),g=!1,q=0,b=0,E=0,M=0,L=0,k=0,P=0,S=0,T=0,B=0,A=Array(1024),D=Array(32),I=A.length;I--;)A[I]=0;for(I=D.length;I--;)D[I]=2*Math.random()-1;for(I=0;I<e;I++){if(g)return I;if(v&&++T>=v&&(T=0,this.reset()),Z&&++Q>=Z&&(Z=0,X*=K),Y<(X*=G+=J)&&(X=Y,0<d)&&(g=!0),o=X,0<x&&(B+=U,o*=1+Math.sin(B)*x),(o|=0)<8&&(o=8),y||(($+=t0)<0?$=0:.5<$&&($=.5)),++b>m)switch(b=0,++q){case 1:m=W;break;case 2:m=V}switch(q){case 0:E=b*O;break;case 1:E=1+2*(1-b*j)*F;break;case 2:E=1-b*z;break;case 3:g=!(E=0)}u&&((s=0|(N+=p))<0?s=-s:1023<s&&(s=1023)),r&&c&&((a*=c)<1e-5?a=1e-5:.1<a&&(a=.1));for(var C=0,R=8;R--;){if(o<=++P&&(P%=o,3==y))for(n=D.length;n--;)D[n]=2*Math.random()-1;switch(y){case 0:i=P/o<$?.5:-.5;break;case 1:i=1-P/o*2;break;case 2:i=.225*(((i=1.27323954*(i=6.28318531*(.5<(i=P/o)?i-1:i))+.405284735*i*i*(i<0?1:-1))<0?-1:1)*i*i-i)+i;break;case 3:i=D[Math.abs(32*P/o|0)]}r&&(n=k,(f*=l)<0?f=0:.1<f&&(f=.1),h?L=(L+(i-k)*f)*w:(k=i,L=0),i=M=(M+((k+=L)-n))*(1-a)),u&&(A[S%1024]=i,i+=A[(S-s+1024)%1024],S++),C+=i}C*=.125*E*_,t[I]=1<=C?32767:C<=-1?-32768:32767*C|0}return e}};window.SOUND=function(t){r.z.A(t);var e=r.C(),t=new Uint8Array(4*((e+1)/2|0)+44),e=2*r.B(new Uint16Array(t.buffer,44),e);(n=new Uint32Array(t.buffer,0,44))[0]=1179011410,n[1]=36+e,n[2]=1163280727,n[3]=544501094,n[4]=16,n[5]=65537,n[6]=44100,n[7]=88200,n[8]=1048578,n[9]=1635017060;for(var e=44+(n[10]=e),n=0,o="data:audio/wav;base64,",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";n<e;n+=3)var i=t[n]<<16|t[n+1]<<8|t[n+2],o=o+(s[i>>18]+s[i>>12&63]+s[i>>6&63]+s[63&i]);return o}})(),function(){function C(){d.clearRect(0,0,u,p),d.save(),d.shadowColor="rgba(0,0,0,0.4)",d.shadowBlur=25,K.paint(d,"#0091EA"),d.shadowColor="#000",d.translate(0,1),A.paint(d,"rgba(55,71,79,0.4)"),M0.paint(d,"rgba(55,71,79,0.4)"),L0.paint(d,"rgba(55,71,79,0.4)"),d.restore()}function n(t,e,n){t.style[e]=n+"px"}function N(){var t=window.innerWidth,e=window.innerHeight,e=(Q<t/e?t=e*Q:e=t/Q,Z=u/t,n(c,"width",t),n(c,"height",e),n(c,"left",.5*(window.innerWidth-t)),n(c,"top",.5*(window.innerHeight-e)),.5*t/u),t="scale3d("+e+","+e+",1)";v0.style[$]=t,E.style[$]=t}function t(t){var e=t.target;"INPUT"!=e.tagName&&"LABEL"!=e.tagName&&(t.preventDefault(),t.stopPropagation())}function F(){c.removeChild(v0),x.play("new"),(e||1<Z)&&document.body.requestFullscreen&&document.body.requestFullscreen()}function U(){E.style.display="none",x.play("new"),L=[],k=[],P=[],S=null,D.dragging=!1,j()}function O(){return(.3*Math.random()+.35)*u}function j(){for(var t=2;t<=2048;t*=2)B[t]=0;A=new i(280,480,400,60),M0=new i(220,420,60,120),L0=new i(680,420,60,120),new f(A,A.handle0,M0.handle0,.1),new f(A,A.handle1,L0.handle1,.1);var e=.5*p;new y(.35*u,e),new y(.65*u,e)}function o(t){D.x=(t.clientX-c.offsetLeft)*Z,D.y=(t.clientY-c.offsetTop)*Z}z.prototype.add=function(t,e,n){this.sounds[t]={tick:0,count:e,pool:[]};for(var o=0;o<e;++o){var s=new Audio;s.src=window.SOUND(n),this.sounds[t].pool.push(s)}},z.prototype.play=function(t){this.on&&((t=this.sounds[t]).pool[t.tick].play(),++t.tick>=t.count)&&(t.tick=0)};var x=new z,e=null!=navigator.userAgent.match(/Android|iPhone|iPad/i);function z(){this.on=!0,this.sounds={}}e?x.on=!1:(x.add("bip",9,[1,,.1241,,.1855,.5336,,,,,,,,,,,,,1,,,.1,,.64]),x.add("die",4,[1,.0013,.3576,.0681,.8007,.5117,,-.3453,.0049,.148,-.2563,-.2717,.2608,,-.3543,-.1884,-.0106,-.0281,.9971,-.6629,-.7531,.0097,-.0086,.5]),x.add("new",2,[1,,.2548,,.1007,.7539,.0996,-.5302,,,,,,.7769,-.4436,,,,1,,,,,.5]),x.add("win",1,[1,.0309,.5597,.0464,.7472,.369,,-.1366,,-.3111,,-.1581,-.8665,,-.0414,.2802,.0258,-.1198,.9955,.1759,,,-5e-4,.64]));V.prototype.boundingBox=function(){for(var t=99999,e=99999,n=-99999,o=-99999,s=0,i=this.positions;s<i.length;s++){var r=i[s];r.x<t&&(t=r.x),r.y<e&&(e=r.y),n<r.x&&(n=r.x),o<r.y&&(o=r.y)}this.center.set(.5*(t+n),.5*(e+o)),this.halfExtents.set(.5*(n-t),.5*(o-e))},V.prototype.project=function(t){this._min=99999,this._max=-99999;for(var e=0,n=this.positions;e<n.length;e++){var o=n[e].dot(t);o<this._min&&(this._min=o),o>this._max&&(this._max=o)}},V.prototype.drag=function(){if(D.dragging&&!S&&m.isPointInPath(D.x,D.y))for(var t=99999,e=0,n=this.vertices;e<n.length;e++){var o=n[e],s=o.position.distance(D);s<t&&(t=s,S=o)}};var R,s=V,f=(W.prototype.solve=function(){T.setSubtract(this.p0,this.p1);var t=T.length();t&&(T.multiplyScalar(this.stiffness*(this.length-t)/t),this.p0.add(T),this.p1.subtract(T))},W),i=((r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(l,R=s),l.prototype.paint=function(t,e){t.beginPath();var n=this.positions[0],o=this.positions[1];t.moveTo(.5*(n.x+o.x),.5*(n.y+o.y));for(var s=1;s<=6;++s)4!=s&&5!=s?(n=this.positions[s%6],o=this.positions[(s+1)%6],t.quadraticCurveTo(n.x,n.y,.5*(n.x+o.x),.5*(n.y+o.y))):t.lineTo(this.positions[s].x,this.positions[s].y);t.fillStyle=e||"#00B0FF",t.fill()},l.prototype.paintLow=function(t,e){t.beginPath();for(var n=0,o=this.positions;n<o.length;n++){var s=o[n];t.lineTo(s.x,s.y)}t.fillStyle=e||"#00B0FF",t.fill()},l.chamfer=10,l),r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},H={};function l(t,e,n,o,s){void 0===s&&(s=!0),R.call(this,250);var i=this.handle0=new h(this,t,e+l.chamfer),r=new h(this,t+l.chamfer,e),a=new h(this,t+n-l.chamfer,e),c=this.handle1=new h(this,t+n,e+l.chamfer),n=new J(this,t+n,e+o),t=new J(this,t,e+o);new f(this,i,r,.1,!0),new f(this,r,a,.1,!0),new f(this,a,c,.1,!0),new f(this,c,n,.1,!0),new f(this,n,t,.1,!0),new f(this,t,i,.1,!0),new f(this,i,c,.1),new f(this,i,n,.1),new f(this,r,n,.1),new f(this,r,t,.1),new f(this,a,n,.1),new f(this,a,t,.1),new f(this,c,t,.1),s&&L.push(this)}function W(t,e,n,o,s){void 0===s&&(s=!1),this.parent=t,this.v0=e,this.v1=n,this.p0=e.position,this.p1=n.position,this.length=this.p0.distance(this.p1),this.stiffness=o,this.isBoundary=s,t.constraints.push(this),s&&t.boundaries.push(this),P.push(this)}function V(t){void 0===t&&(t=1),this.vertices=[],this.positions=[],this.constraints=[],this.boundaries=[],this.center=new a,this.halfExtents=new a,this.mass=t}["eee4da","ede0c8","f2b179","f59563","f67c5f","f65e3b","edcf72","edcc61","edc850","edc53f","edc22e"].forEach(function(t,e){H[Math.pow(2,e+1)]="#"+t});r(n0,G=s),n0.prototype.paint=function(t){t.beginPath();var e=this.positions[0],n=this.positions[1];t.moveTo(.5*(e.x+n.x),.5*(e.y+n.y));for(var o=1;o<=this.positions.length;++o)e=this.positions[o%this.positions.length],n=this.positions[(o+1)%this.positions.length],t.quadraticCurveTo(e.x,e.y,.5*(e.x+n.x),.5*(e.y+n.y));t.fillStyle=H[this.n],t.fill(),t.save(),t.translate(this.center.x,this.center.y),t.rotate(Math.atan2(e.y-this.center.y,e.x-this.center.x)),t.font=this.font,t.fillStyle=4<this.n?"#f9f6f2":"#776e65",t.fillText(""+this.n,0,0),t.restore(),this.drag()},n0.prototype.paintLow=function(t){t.beginPath();var e=this.boundaries[0].p0;t.moveTo(e.x,e.y);for(var n=0,o=this.boundaries;n<o.length;n++){var s=o[n].p1;t.lineTo(s.x,s.y)}t.fillStyle=H[this.n],t.fill(),t.save(),t.translate(this.center.x,this.center.y),t.rotate(Math.atan2(e.y-this.center.y,e.x-this.center.x)),t.font=this.font,t.fillStyle=4<this.n?"#f9f6f2":"#776e65",t.fillText(""+this.n,0,0),t.restore(),this.drag()};var Y,G,y=n0,h=(e0.prototype.integrate=function(){var t=this.position,e=this.oldPosition,n=t.x,o=t.y;t.x+=t.x-e.x,t.y+=t.y-e.y+y0,e.set(n,o),t.y<-100?t.y=-100:t.y>=_.height+250&&(t.x-=(t.x-e.x)*g0,t.y=_.height-1),t.x<0?t.x=0:t.x>=_.width&&(t.x=_.width-1)},e0),J=((r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(t0,Y=h),t0.prototype.integrate=function(){this.position.set(this.x,this.y),this.oldPosition.set(this.x,this.y)},t0),a=(v.prototype.set=function(t,e){this.x=t,this.y=e},v.prototype.setTo=function(t){this.x=t.x,this.y=t.y},v.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},v.prototype.distance=function(t){var e=this.x-t.x,t=this.y-t.y;return Math.sqrt(e*e+t*t)},v.prototype.add=function(t){this.x+=t.x,this.y+=t.y},v.prototype.subtract=function(t){this.x-=t.x,this.y-=t.y},v.prototype.setSubtract=function(t,e){this.x=t.x-e.x,this.y=t.y-e.y},v.prototype.dot=function(t){return this.x*t.x+this.y*t.y},v.prototype.multiplyScalar=function(t){this.x*=t,this.y*=t},v.prototype.setMultiplyScalar=function(t,e){this.x=t.x*e,this.y=t.y*e},v.prototype.setNormal=function(t,e){var n=t.y-e.y,e=e.x-t.x,t=Math.sqrt(n*n+e*e);t<Number.MIN_VALUE?(this.x=n,this.y=e):(this.x=n*(n=1/t),this.y=e*n)},v),K=null,u=960,p=540,Q=16/9,Z=1,c=document.getElementById("container"),s=document.getElementById("backcanvas"),_=document.getElementById("canvas"),d=s.getContext("2d"),m=_.getContext("2d"),$="transform";function v(t,e){void 0===e&&(e=0),this.x=t=void 0===t?0:t,this.y=e}function t0(t,e,n){Y.call(this,t,e,n),this.x=e,this.y=n}function e0(t,e,n){this.parent=t,this.position=new a(e,n),this.oldPosition=new a(e,n),t.vertices.push(this),t.positions.push(this.position),k.push(this)}function n0(t,e,n,o){void 0===e&&(e=-40),void 0===n&&(n=2),void 0===o&&(o=!0),G.call(this,1+.2*Math.log10(n)),++B[this.n=n],this.r=40+4*(Math.log2(n)-1),this.font="bold "+(.1*this.r+28)+"px 'Segoe UI','Helvetica Neue',sans-serif";n=this.r;for(var s=Math.min((0|.04*Math.PI*n)<<1,16),i=2*Math.PI/s,r=0;r<s;++r){var a=r*i;new h(this,t+this.r*Math.cos(a),e+this.r*Math.sin(a))}for(r=0;r<s-1;++r)for(var c=r+1;c<s;++c)new f(this,this.vertices[r],this.vertices[c],.005,c==r+1);o&&(this.boundingBox(),L.push(this))}$ in c.style||($="webkitTransform"),s.width=_.width=u,s.height=_.height=p,m.lineWidth=2,m.textAlign="center",m.textBaseline="middle",window.addEventListener("resize",N),window.addEventListener("orientationchange",N),_.addEventListener("contextmenu",function(t){t.preventDefault()});g=new a;var o0,w,s0,g,i0,r0,a0,q,c0,f0,b,l0,h0,_0,d0,r=[function(t,e){if(0<=Math.abs(e.center.x-t.center.x)-(t.halfExtents.x+e.halfExtents.x)||0<=Math.abs(e.center.y-t.center.y)-(t.halfExtents.y+e.halfExtents.y))return!1;o0=99999;for(var n,o=0,s=[t,e];o<s.length;o++)for(var i=0,r=s[o].boundaries;i<r.length;i++){var a=r[i];if(T.setNormal(a.p0,a.p1),t.project(T),e.project(T),0<(h=t._min<e._min?e._min-t._max:t._min-e._max))return!1;(h*=-1)<o0&&(o0=h,g.setTo(T),w=a)}w.parent!=e&&(n=t,t=e,e=n),T.setSubtract(t.center,e.center),T.dot(g)<0&&g.multiplyScalar(-1);for(var c=99999,f=0,l=t.vertices;f<l.length;f++){var h,_=l[f];T.setSubtract(_.position,e.center),(h=g.dot(T))<c&&(c=h,s0=_)}return!0},function(){var t=w.p0,e=w.p1,n=w.v0.oldPosition,o=w.v1.oldPosition,s=s0.position,i=s0.oldPosition;T.setMultiplyScalar(g,o0);var r=1/((l=Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?(s.x-T.x-t.x)/(e.x-t.x):(s.y-T.y-t.y)/(e.y-t.y))*l+(1-l)*(1-l)),a=s0.parent.mass,c=w.parent.mass,f=(c/=f=a+c,(1-l)*r*(a/=2*f)),l=l*r*a;t.x-=T.x*f,t.y-=T.y*f,e.x-=T.x*l,e.y-=T.y*l,s.x+=T.x*c,s.y+=T.y*c,T.set(s.x-i.x-.5*(t.x+e.x-n.x-o.x),s.y-i.y-.5*(t.y+e.y-n.y-o.y)),b0.set(-g.y,g.x),T.setMultiplyScalar(b0,T.dot(b0)),n.x-=T.x*M*f,n.y-=T.y*M*f,o.x-=T.x*M*l,o.y-=T.y*M*l,i.x+=T.x*M*c,i.y+=T.y*M*c}],u0=r[0],p0=r[1],s=document.getElementById("load"),v0=document.getElementById("home"),r=document.getElementById("start"),E=document.getElementById("end"),x0=document.getElementById("reset"),y0=(v0.addEventListener("mousedown",t),v0.addEventListener("touchstart",t),r.addEventListener("mousedown",F),r.addEventListener("touchstart",F),E.addEventListener("mousedown",t),E.addEventListener("touchstart",t),x0.addEventListener("mousedown",U),x0.addEventListener("touchstart",U),.6),m0=.1,w0=40,M=.9,g0=.6,q0=.24,L=[],k=[],P=[],S=null,T=new a,b0=new a,B={},E0=(i0=function(){var t=B[256]||B[512]||B[1024];B[2]?new y(O()):B[4]?new y(O(),-44,4):t?B[8]?new y(O(),-48,8):(new y(.35*u,-44,4),new y(.65*u,-44,4)):(new y(.35*u),new y(.65*u)),x.play("new")},function(){a0=Date.now(),q=q||setTimeout(function t(){var e=Date.now()-a0;e<r0?q=setTimeout(t,r0-e):(q=null,i0())},r0)}),A=q=null,M0=null,L0=null,r=function(){function F(t){return Math.sin(6.283184*t)}function U(t){return F(t)<0?-1:1}function O(t){return t%1-.5}function j(t){t=t%1*4;return t<2?t-1:3-t}function z(t){return.00390625*Math.pow(1.059463094,t-128)}var R,H,W=44100,V=W*X.songLen,t=Math.ceil(Math.sqrt(2*V/2)),e=document.createElement("canvas").getContext("2d");R=e.createImageData(t,t).data;for(var n=e.createImageData(t,t).data,o=t*t*4-2;0<=o;o-=2)n[o]=0,n[o+1]=128;H=n,this.lps=W/X.rowLen,this.generate=function(t){for(var e,n,o,s,i,r,a,c,f,l,h,_,d,u,p,v,x,y,m,w,g=[F,U,O,j],q=R,b=H,E=V,M=2*V*2,L=X.songData[t],k=X.rowLen,P=g[L.lfo_waveform],S=g[L.osc1_waveform],T=g[L.osc2_waveform],B=L.env_attack,A=L.env_sustain,D=L.env_release,I=Math.pow(2,L.fx_pan_freq-8)/k,N=Math.pow(2,L.lfo_freq-8)/k,C=0;C<M;C+=2)q[C]=0,q[C+1]=128;for(o=r=0;o<X.endPattern-1;++o)for(a=L.p[o],s=0;s<32;++s){if(a&&(i=L.c[a-1].n[s]))for(c=f=0,m=z(i+12*(L.osc1_oct-8)+L.osc1_det)*(1+8e-4*L.osc1_detune),w=z(i+12*(L.osc2_oct-8)+L.osc2_det)*(1+8e-4*L.osc2_detune),l=L.fx_resonance/255,h=_=0,e=B+A+D-1;0<=e;--e){switch(p=P((n=e+r)*N)*L.lfo_amt/512+.5,y=1,e<B?y=e/B:B+A<=e&&(y-=(e-B-A)/D),u=m,L.lfo_osc1_freq&&(u+=p),L.osc1_xenv&&(u*=y*y),x=S(c+=u)*L.osc1_vol,u=w,L.osc2_xenv&&(u*=y*y),x+=T(f+=u)*L.osc2_vol,L.noise_fader&&(x+=(2*Math.random()-1)*L.noise_fader*y),x*=y/255,y=L.fx_freq,L.lfo_fx_freq&&(y*=p),_+=(y=1.5*Math.sin(3.141592*y/W))*(d=l*(x-_)-(h+=y*_)),L.fx_filter){case 1:x=d;break;case 2:x=h;break;case 3:x=_;break;case 4:x=h+d}u=F(n*I)*L.fx_pan_amt/512+.5,x*=39*L.env_master,v=q[n<<=2]+(q[n+1]<<8)+x*(1-u),q[n]=255&v,q[n+1]=v>>8&255,v=q[n+2]+(q[n+3]<<8)+x*u,q[n+2]=255&v,q[n+3]=v>>8&255}r+=k}for(o=L.fx_delay_time*k>>1,u=L.fx_delay_amt/255,i=0;i<E-o;++i)v=q[n=4*(i+o)]+(q[n+1]<<8)+(q[(C=4*i)+2]+(q[C+3]<<8)-32768)*u,q[n]=255&v,q[n+1]=v>>8&255,v=q[n+2]+(q[n+3]<<8)+(q[C]+(q[C+1]<<8)-32768)*u,q[n+2]=255&v,q[n+3]=v>>8&255;for(C=0;C<M;C+=2)v=b[C]+(b[C+1]<<8)+q[C]+(q[C+1]<<8)-32768,b[C]=255&v,b[C+1]=v>>8&255},this.createAudio=function(){var t,e,n,o,s,i,r,a=H,c=2*V*2;for(R=null,s=(i=c-8)-36,o=String.fromCharCode(82,73,70,70,255&i,i>>8&255,i>>16&255,i>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&s,s>>8&255,s>>16&255,s>>24&255),t=0;t<c;){for(n="",e=0;e<256&&t<c;++e,t+=2)r=(r=4*(a[t]+(a[t+1]<<8)-32768))<-32768?-32768:32767<r?32767:r,n+=String.fromCharCode(255&r,r>>8&255);o+=n}return i="data:audio/wav;base64,"+btoa(o),o=null,new Audio(i)},this.getData=function(t,e){for(var n=Math.floor(t*W),o=0,s=[],i=H;o<2*e;o+=2){var r=4*(n+o)+1;s.push(0<t&&r<i.length?(i[r]+i[r-1]/256)/256:.5)}return s}},X={songLen:37,songData:[{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:192,osc1_waveform:3,osc2_oct:7,osc2_det:0,osc2_detune:7,osc2_xenv:0,osc2_vol:201,osc2_waveform:3,noise_fader:0,env_attack:789,env_sustain:1234,env_release:13636,env_master:191,fx_filter:2,fx_freq:5839,fx_resonance:254,fx_delay_time:6,fx_delay_amt:121,fx_pan_freq:6,fx_pan_amt:147,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:6,lfo_amt:195,lfo_waveform:0,p:[1,2,0,0,1,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c:[{n:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,154,0,152,0,157,0,0,0,156,0,0,0,0,0]},{n:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,154,0,152,0,157,0,0,0,159,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:255,osc1_waveform:2,osc2_oct:8,osc2_det:0,osc2_detune:18,osc2_xenv:1,osc2_vol:191,osc2_waveform:2,noise_fader:0,env_attack:3997,env_sustain:56363,env_release:1e5,env_master:255,fx_filter:2,fx_freq:392,fx_resonance:255,fx_delay_time:8,fx_delay_amt:69,fx_pan_freq:5,fx_pan_amt:67,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:4,lfo_amt:57,lfo_waveform:3,p:[1,2,1,2,1,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c:[{n:[130,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[123,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:8,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:0,osc1_waveform:0,osc2_oct:8,osc2_det:0,osc2_detune:0,osc2_xenv:0,osc2_vol:0,osc2_waveform:0,noise_fader:60,env_attack:50,env_sustain:419,env_release:4607,env_master:130,fx_filter:1,fx_freq:10332,fx_resonance:120,fx_delay_time:4,fx_delay_amt:16,fx_pan_freq:5,fx_pan_amt:108,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:5,lfo_amt:187,lfo_waveform:0,p:[0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c:[{n:[0,0,147,0,0,0,147,147,0,0,147,0,0,147,0,147,0,0,147,0,0,0,147,147,0,0,147,0,0,147,0,147]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:1,osc1_vol:255,osc1_waveform:0,osc2_oct:7,osc2_det:0,osc2_detune:0,osc2_xenv:1,osc2_vol:255,osc2_waveform:0,noise_fader:0,env_attack:50,env_sustain:150,env_release:4800,env_master:200,fx_filter:2,fx_freq:600,fx_resonance:254,fx_delay_time:0,fx_delay_amt:0,fx_pan_freq:0,fx_pan_amt:0,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:0,lfo_waveform:0,p:[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c:[{n:[147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:255,osc1_waveform:2,osc2_oct:7,osc2_det:0,osc2_detune:9,osc2_xenv:0,osc2_vol:154,osc2_waveform:2,noise_fader:0,env_attack:2418,env_sustain:1075,env_release:10614,env_master:240,fx_filter:3,fx_freq:2962,fx_resonance:255,fx_delay_time:6,fx_delay_amt:117,fx_pan_freq:3,fx_pan_amt:73,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:5,lfo_amt:124,lfo_waveform:0,p:[0,0,0,0,1,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c:[{n:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,154,0,152,0,157,0,0,0,156,0,0,0,0,0]},{n:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,147,0,152,0,157,0,0,0,159,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:192,osc1_waveform:1,osc2_oct:6,osc2_det:0,osc2_detune:9,osc2_xenv:0,osc2_vol:192,osc2_waveform:1,noise_fader:0,env_attack:137,env_sustain:2e3,env_release:4611,env_master:192,fx_filter:1,fx_freq:982,fx_resonance:89,fx_delay_time:6,fx_delay_amt:25,fx_pan_freq:6,fx_pan_amt:77,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:3,lfo_amt:69,lfo_waveform:0,p:[1,2,1,3,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c:[{n:[130,0,130,0,142,0,130,130,0,142,130,0,142,0,130,0,130,0,130,0,142,0,130,130,0,142,130,0,142,0,130,0]},{n:[123,0,123,0,135,0,123,123,0,135,123,0,135,0,123,0,123,0,123,0,135,0,123,123,0,135,123,0,135,0,123,0]},{n:[135,0,135,0,147,0,135,135,0,147,135,0,147,0,135,0,135,0,135,0,147,0,135,135,0,147,135,0,147,0,135,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:255,osc1_waveform:3,osc2_oct:8,osc2_det:0,osc2_detune:0,osc2_xenv:0,osc2_vol:255,osc2_waveform:0,noise_fader:127,env_attack:22,env_sustain:88,env_release:3997,env_master:255,fx_filter:3,fx_freq:4067,fx_resonance:234,fx_delay_time:4,fx_delay_amt:33,fx_pan_freq:2,fx_pan_amt:84,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:3,lfo_amt:28,lfo_waveform:0,p:[0,0,1,2,1,2,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c:[{n:[0,0,142,0,154,0,0,0,142,0,0,0,154,0,0,0,0,0,142,0,154,0,0,0,142,0,0,0,154,0,0,0]},{n:[0,0,147,0,154,0,0,0,147,0,0,0,154,0,0,0,0,0,147,0,154,0,147,0,0,0,154,0,0,0,154,0]},{n:[0,0,147,0,154,0,0,0,147,0,0,0,154,0,0,0,0,0,147,0,154,0,0,0,147,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:8,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:0,osc1_waveform:0,osc2_oct:8,osc2_det:0,osc2_detune:0,osc2_xenv:0,osc2_vol:0,osc2_waveform:0,noise_fader:255,env_attack:140347,env_sustain:9216,env_release:133417,env_master:208,fx_filter:2,fx_freq:2500,fx_resonance:16,fx_delay_time:2,fx_delay_amt:157,fx_pan_freq:8,fx_pan_amt:207,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:2,lfo_amt:51,lfo_waveform:0,p:[0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c:[{n:[147,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]}],rowLen:5513,endPattern:9},D={dragging:!(r0=300),x:0,y:0},I=(addEventListener("mousedown",function(t){t.preventDefault(),D.dragging=!0,o(t)}),addEventListener("mousemove",function(t){t.preventDefault(),o(t)}),addEventListener("mouseup",function(t){t.preventDefault(),D.dragging=!1,S=null}),document.addEventListener("touchstart",function(t){var e=t.target;"INPUT"!=e.tagName&&"LABEL"!=e.tagName&&t.preventDefault(),D.dragging=!0,o(t.targetTouches[0])}),document.addEventListener("touchmove",function(t){t.preventDefault(),o(t.targetTouches[0])}),document.addEventListener("touchend",function(t){D.dragging=!1,S=null}),document.addEventListener("touchcancel",function(t){D.dragging=!1,S=null}),Math.log2||(Math.log2=function(t){return Math.log(t)/Math.LN2}),Math.log10||(Math.log10=function(t){return Math.log(t)/Math.LN10}),Date.now||(Date.now=function(){return(new Date).getTime()}),Element.prototype.requestFullscreen||(Element.prototype.requestFullscreen=Element.prototype.mozRequestFullScreen||Element.prototype.msRequestFullscreen||Element.prototype.webkitRequestFullscreen),null);if(!e)try{for(var k0=new r,P0=0;P0<8;++P0)k0.generate(P0);(I=k0.createAudio()).loop=!0,I.volume=.9}catch(t){}N(),e&&(document.body.className="mobile"),c0=document.getElementById("m"),f0=document.getElementById("s"),b=document.getElementById("q"),c0.addEventListener("change",function(t){I&&(c0.checked?(I.currentTime=0,I.play()):I.pause())}),f0.addEventListener("change",function(t){x.on=f0.checked}),l0=i.prototype.paint,h0=i.prototype.paintLow,_0=y.prototype.paint,d0=y.prototype.paintLow,e&&(b.checked=!1,i.prototype.paint=h0,y.prototype.paint=d0),b.addEventListener("change",function(t){i.prototype.paint=b.checked?l0:h0,y.prototype.paint=b.checked?_0:d0,C()}),c.removeChild(s),I&&I.play(),j(),K=new i(255,360,450,180,!1),requestAnimationFrame(function t(){m.clearRect(0,0,u,p);for(var e=0,n=k;e<n.length;e++)n[e].integrate();for(var o,v=!1,s=3;s<L.length;++s)(t=>{var e=L[t];e.center.y>=p+e.r&&(P=P.filter(function(t){return t.parent!=e}),k=k.filter(function(t){return t.parent!=e}),S&&S.parent==e&&(S=null,D.dragging=!1),L.splice(t,1),--B[e.n],x.play("die"),v=!0,--t),o=t})(s),s=o;for(var i=function(t){for(var e=L[t],n=2.5*e.r,o=99999,s=null,i=0,r=t+1;r<L.length;++r){var a,c=L[r];e.n==c.n&&(a=e.center.distance(c.center))<n&&a<o&&(o=a,s=c,i=r)}if(!s)return"continue";var f=.5*(e.center.x+s.center.x),l=.5*(e.center.y+s.center.y);if(2*e.r<o){for(var h=0,_=e.positions;h<_.length;h++)(d=_[h]).x+=(f-d.x)*m0,d.y+=(l-d.y)*m0;for(var d,u=0,p=s.positions;u<p.length;u++)(d=p[u]).x+=(f-d.x)*m0,d.y+=(l-d.y)*m0}else P=P.filter(function(t){return t.parent!=e&&t.parent!=s}),k=k.filter(function(t){return t.parent!=e&&t.parent!=s}),!S||S.parent!=e&&S.parent!=s||(S=null,D.dragging=!1),L.splice(i,1),L[t]=new y(f,l,e.n<<1,!1),B[e.n]-=2,x.play("bip"),v=!0,1024==e.n&&(E.style.display="block",x.play("win"))},s=3;s<L.length-1;++s)i(s);v&&E0(),S&&(S.position.x+=(D.x-S.position.x)*q0,S.position.y+=(D.y-S.position.y)*q0);for(var r=0;r<w0;++r){for(var a=0,c=P;a<c.length;a++)c[a].solve();for(var f=0,l=L;f<l.length;f++)l[f].boundingBox();for(s=0;s<L.length-1;++s)for(var h=s+1;h<L.length;++h)u0(L[s],L[h])&&p0()}for(var _=0,d=L;_<d.length;_++)d[_].paint(m);S&&(m.beginPath(),m.moveTo(S.position.x,S.position.y),m.lineTo(D.x,D.y),m.strokeStyle="#FFD600",m.stroke()),requestAnimationFrame(t)}),C()}()</script></body></html>