<!DOCTYPE html><html><head><meta charset=utf-8><style>:root{--accent:#333;--secondary:#fff}*{box-sizing:border-box}body,html{height:100%}body{align-items:center;background:#e5e5e5;display:flex;line-height:1.4;margin:0}svg{max-height:100vh;overflow:visible;shape-rendering:crispEdges;vertical-align:middle;width:100%}.menu .text{opacity:.1}.menu .selected .text{opacity:1}.menu .stars{display:none;shape-rendering:auto}.menu .selected .stars{display:block}#hud{opacity:.1}#inner-guy{transform-origin:13px}.left #inner-guy{transform:scaleX(-1)}.walk #left_foot,.walk #right_foot{animation:walk .2s infinite}.walk #right_foot{animation-delay:.1s}.walk #head{animation:walk .4s infinite;position:relative;z-index:5}.off #face,.on #guy .accent{fill:var(--accent)}.off #guy .accent,.on #face{fill:var(--secondary)}#death rect{display:none}.dying #death rect{animation:death .8s infinite;display:initial;opacity:0}@keyframes death{0%{opacity:1;transform:rotate(45deg)}50%{opacity:0;transform:rotate(0)}}#inner-goal{animation:pulse 2s infinite;shape-rendering:auto;transform-origin:12px 12px}.finish #inner-goal{animation:none}#inner-goal-finish{transform-origin:12px 12px;transition:transform .5s}.finish #inner-goal-finish{transform:scale(150)}.on>svg{background:var(--secondary);color:var(--accent);fill:var(--accent)}.off>svg{background:var(--accent);color:var(--secondary);fill:var(--secondary)}.off .light,.on .dark{opacity:.1}@keyframes walk{50%{transform:translateY(-2px)}}@keyframes pulse{50%{transform:scale(.7)}}[hidden]{display:none!important}#dialog{background:#fff;box-shadow:0 5px 10px rgba(0,0,0,.2);font-family:helvetica neue,helvetica,arial,sans-serif;font-size:16px;padding:25px;position:fixed;right:10px;top:10px;width:400px}h3{margin:0 0 15px}ul{list-style:none;margin:0 0 20px;padding:0}li{margin-bottom:10px}kbd{border:2px solid #444;border-radius:2px;display:inline-block;font-weight:700;line-height:1;padding:4px 6px}span{margin-left:10px}</style><script type=module defer=defer>function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,s=Object.create(o.prototype),a=new D(r||[]);return i(s,"_invoke",{value:q(t,n,a)}),s}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var f="suspendedStart",d="suspendedYield",y="executing",p="completed",g={};function v(){}function m(){}function b(){}var w={};c(w,s,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(B([])));k&&k!==n&&r.call(k,s)&&(w=k);var x=b.prototype=v.prototype=Object.create(w);function A(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,o,s,a){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==_typeof(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,a)}))}a(u.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function q(e,n,r){var i=f;return function(o,s){if(i===y)throw Error("Generator is already running");if(i===p){if("throw"===o)throw s;return{value:t,done:!0}}for(r.method=o,r.arg=s;;){var a=r.delegate;if(a){var u=C(a,r);if(u){if(u===g)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=y;var c=l(e,n,r);if("normal"===c.type){if(i=r.done?p:d,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=p,r.method="throw",r.arg=c.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator["return"]&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=l(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var s=o.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function G(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function B(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(_typeof(e)+" is not iterable")}return m.prototype=b,i(x,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},A(E.prototype),c(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new E(h(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},A(x),c(x,u,"Generator"),c(x,s,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function i(){for(;n.length;){var t=n.pop();if(t in e)return i.value=t,i.done=!1,i}return i.done=!0,i}},e.values=B,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(G),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),G(n),g}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;G(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:B(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function asyncGeneratorStep(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}function _asyncToGenerator(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){asyncGeneratorStep(o,r,i,s,a,"next",t)}function a(t){asyncGeneratorStep(o,r,i,s,a,"throw",t)}s(void 0)}))}}function _construct(t,e,n){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&_setPrototypeOf(i,n.prototype),i}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n["return"]&&(s=n["return"](),Object(s)!==s))return}finally{if(c)throw i}}return a}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _superPropSet(t,e,n,r,i,o){return _set(_getPrototypeOf(o?t.prototype:t),e,n,r,i)}function set(t,e,n,r){return set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=_superPropBase(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else _defineProperty(r,e,n);return!0},set(t,e,n,r)}function _set(t,e,n,r,i){if(!set(t,e,n,r||t)&&i)throw new TypeError("failed to set property");return n}function _defineProperty(t,e,n){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _superPropGet(t,e,n,r){var i=_get(_getPrototypeOf(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof i?function(t){return i.apply(n,t)}:i}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=_superPropBase(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},_get.apply(null,arguments)}function _superPropBase(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _createForOfIteratorHelper(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function _callSuper(t,e,n){return e=_getPrototypeOf(e),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(e,n||[],_getPrototypeOf(t).constructor):e.apply(t,n))}function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey(r.key),r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var t=new Set,e=new Set,s=new Set(["w","a","s","d"," ","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"]),i=function(){return t.has("w")||t.has("ArrowUp")||e.has(0)||e.has(12)},h=function(){return t.has("a")||t.has("ArrowLeft")||e.has(14)},n=function(){return t.has("d")||t.has("ArrowRight")||e.has(15)};document.addEventListener("keydown",(function(e){t.add(e.key),s.has(e.key)&&e.preventDefault()})),document.addEventListener("keyup",(function(e){var n=e.key;t["delete"](n)}));var o=new Map,r=function(t,e){o.has(t)||o.set(t,[]),o.get(t).push(e)};requestAnimationFrame((function ft(t){var n=navigator.getGamepads()[0];n?(n.buttons.forEach((function(t,n){if(t.pressed){if(!e.has(n)){var r=o.get(n);r&&r.forEach((function(t){return t()}))}e.add(n)}else e["delete"](n)})),requestAnimationFrame(ft)):e.clear()}));var a=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t},c=[[[24,239],[724,244],[[0,288,330,192,1],[438,288,330,192,1]],[]],[[371,51],[724,404],[[0,100,768,16,1],[0,216,768,16,0],[0,332,768,16,1],[0,448,768,32,0]],[]],[[24,239],[724,244],[[0,288,330,192,1],[438,288,330,192,0]],[]],[[23,263],[724,268],[[0,312,768,8,1],[380,0,8,312,1],[0,408,768,72,0]],[]],[[116,96],[628,412],[[64,448,128,32,!1],[320,448,128,32,!0],[576,448,128,32,!1]],[]],[[24,399],[604,152],[[0,448,768,32,1],[128,320,512,8,1],[632,328,8,120,1],[128,192,512,8,1],[128,200,8,120,1],[640,384,128,8,0],[0,256,128,8,0]],[]],[[16,275],[566,248],[[0,0,768,64,1],[0,64,128,192,1],[0,324,248,92,1],[0,416,768,64,1],[192,132,180,96,1],[440,64,100,224,1],[620,112,72,245,1],[192,228,56,96,1],[300,288,320,69,1]],[]],[[16,367],[704,84],[[0,416,244,64,1],[524,128,244,352,1],[288,320,64,160,0],[416,224,64,256,0]],[]],[[104,175],[176,32],[[96,224,56,8,1],[96,232,56,8,0],[144,72,8,152,1],[152,72,8,168,0],[160,72,128,92,1],[160,164,256,92,1],[160,256,384,92,1],[544,256,8,92,0],[160,348,512,92,1],[160,440,512,8,0],[552,340,120,8,0]],[]],[[16,422],[724,416],[[0,472,48,8,1],[0,376,48,8,0],[0,280,48,8,1],[0,184,96,8,0],[384,456,384,24,1]],[]],[[16,239],[724,244],[[0,288,768,192,1],[336,0,96,288,1]],[]],[[16,56],[724,216],[0,1,2,3,4,5,6,7].map((function(t){return[96*t,a(240,300),a(24,72),a(24,180),a(0,2)]})),[]],[[48,383],[696,384],[[48,432,24,24,1],[156,348,24,24,0],[48,264,24,24,1],[156,180,24,24,0],[264,180,24,24,1],[372,180,24,24,0],[480,180,24,24,1],[588,180,24,24,0],[696,264,24,24,1],[588,348,24,24,0],[696,432,24,24,1]],[]],[[24,8],[724,a(128,416)],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23].map((function(t){return[32*t,a(64,464),8,8,a(0,2)]})),[]],[[372,391],[372,20],[[320,440,128,8,1],[320,344,128,8,0],[320,248,128,8,1],[320,152,128,8,0]],[[320,448,128,8,1,"down"],[320,352,128,8,0,"down"],[320,256,128,8,1,"down"],[320,160,128,8,0,"down"]]],[[372,15],[372,418],[[320,64,128,16,1],[256,80,256,128,0],[320,208,128,16,1],[348,224,72,160,1],[348,384,8,96,1],[356,384,8,96,0],[412,384,8,96,1],[404,384,8,96,0]],[[312,64,8,16,1,"left"],[448,64,8,16,1,"right"],[312,208,8,16,1,"left"],[448,208,8,16,1,"right"]]],[[24,64],[724,a(128,416)],[[0,a(128,352),768,2,!0]],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].map((function(t){return[48*t,a(128,352),16,8,a(0,2),"up"]}))],[[371,20],[372,372],[[336,320,96,8,!0],[336,416,96,8,!0],[336,328,8,88,!0],[424,328,8,88,!0]],[[336,312,96,8,!0,"up"]]],[[371,20],[584,404],[[0,152,368,8,!0],[0,248,448,8,!0],[0,344,528,8,!0]],[[0,144,368,8,!0,"up"],[0,240,448,8,!0,"up"],[0,336,528,8,!0,"up"]]],[[12,312],[725,307],[[0,152,768,72,!0],[0,362,64,8,!0],[192,362,128,8,!0],[448,362,128,8,!0],[704,362,64,8,!0]],[[0,224,768,8,!0,"down"]]],[[371,20],[372,404],[[320,384,128,8,!0],[320,272,128,8,!1],[320,168,128,8,!0]],[[320,376,128,8,!0,"up"],[320,264,128,8,!1,"up"],[320,160,128,8,!0,"up"]]],[[63,263],[660,272],[[48,312,96,96,1],[144,124,48,284,1],[192,124,96,96,1],[192,312,96,96,0],[288,124,48,284,1],[336,312,96,96,1],[432,124,48,284,1],[480,124,96,96,1],[480,312,96,96,0],[576,124,48,284,1],[624,312,96,96,1]],[[232,304,16,8,0,"up"],[520,304,16,8,0,"up"]]],[[148,254],[600,266],[[94,176,8,128,!0],[222,176,8,128,!0],[94,168,136,8,!0],[94,304,136,8,!0],[318,176,8,128,!0],[446,176,8,128,!0],[318,168,136,8,!0],[318,304,136,8,!0],[542,176,8,128,!0],[670,176,8,128,!0],[542,168,136,8,!0],[542,304,136,8,!0]],[]],[[400,20],[372,432],[],[[0,96,384,8,!0,"up"],[0,104,384,8,!1,"down"],[400,240,368,8,!0,"up"],[400,248,368,8,!1,"down"],[0,384,384,8,!0,"up"],[0,392,384,8,!1,"down"]]],[[368,14],[269,419],[],[[328,32,8,80,1,"right"],[320,32,8,80,0,"left"],[424,32,8,80,1,"left"],[432,32,8,80,0,"right"],[280,175,8,80,1,"right"],[272,174,8,80,0,"left"],[376,175,8,80,1,"left"],[384,175,8,80,0,"right"],[232,320,8,80,1,"right"],[224,319,8,80,0,"left"],[328,320,8,80,1,"left"],[336,319,8,80,0,"right"]]]],d=function(t){return new Promise((function(e,n){var r=performance.now();requestAnimationFrame((function i(n){if(n>=r+t)return e();requestAnimationFrame(i)}))}))},l=function(){return _createClass((function t(e){_classCallCheck(this,t),this.element=e,this.bounds={}}),[{key:"hidden",get:function(){return this.element.hasAttribute("hidden")},set:function(t){t?this.element.setAttribute("hidden",""):this.element.removeAttribute("hidden")}},{key:"x",get:function(){return this._x},set:function(t){this._x=t||0,this.element.setAttribute("x",Math.round(this.x))}},{key:"y",get:function(){return this._y},set:function(t){this._y=t||0,this.element.setAttribute("y",Math.round(this.y))}},{key:"width",get:function(){return this._width},set:function(t){this._width=Math.max(0,t||0),this.element.setAttribute("width",Math.round(this.width))}},{key:"height",get:function(){return this._height},set:function(t){this._height=Math.max(0,t||0),this.element.setAttribute("height",Math.round(this.height))}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height},set:function(t){this.y=t-this.height}},{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width},set:function(t){this.x=(t||0)-this.width}},{key:"isLeftOf",value:function(t){return this.right<=t.left}},{key:"isRightOf",value:function(t){return this.left>=t.right}},{key:"isAbove",value:function(t){return this.bottom<=t.top}},{key:"isBelow",value:function(t){return this.top>=t.bottom}},{key:"overlaps",value:function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top}},{key:"append",value:function(t){var e=t.element;this.element.appendChild(e)}},{key:"remove",value:function(){this.element.remove()}}])}(),u=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},g=function(){function t(e,n){var r;return _classCallCheck(this,t),(r=_callSuper(this,t,[u("svg")])).element.innerHTML='\n    <svg id="goal"><g id="inner-goal"><g id="inner-goal-finish">\n      <path d="M12 19.26L6.37 22.1a1 1 0 0 1-1.44-1.07l1.05-5.98-4.47-4.22a1 1 0 0 1 .55-1.72l6.22-.88 2.83-5.5a1 1 0 0 1 1.78 0l2.83 5.5 6.22.88a1 1 0 0 1 .55 1.72l-4.47 4.22 1.05 5.98a1 1 0 0 1-1.44 1.07L12 19.26z"/>\n    </g></g></svg>',r.width=22,r.height=20,r.load(e,n),r}return _inherits(t,l),_createClass(t,[{key:"load",value:function(t,e){this.x=t,this.y=e}},{key:"toJSON",value:function(){return[Math.round(this.x),Math.round(this.y)]}}])}(),m=function(){function t(e,n){var r;return _classCallCheck(this,t),(r=_callSuper(this,t,[u("svg")])).element.innerHTML='\n    <svg id="guy">\n      <g id="inner-guy">\n        <rect class="accent" x="0" y="17" width="24" height="21"/>\n        <rect id="left_foot" class="accent" x="4" y="38" width="6" height="10"/>\n        <rect id="right_foot" class="accent" x="14" y="38" width="6" height="10"/>\n        <g id="head">\n          <rect class="accent" x="0" y="0" width="26" height="19"/>\n          <rect id="face" x="4" y="3" width="20" height="14"/>\n          <rect class="accent" x="9" y="7" width="4" height="4"/>\n          <rect class="accent" x="17" y="7" width="4" height="4"/>\n        </g>\n      </g>\n    </svg>',r.load(e,n),r.height=48,r.width=26,r.speed=360,r.vx=0,r.vy=0,r}return _inherits(t,l),_createClass(t,[{key:"tick",value:function(t){h()&&!n()?(this.vx=-t(this.speed),this.faceLeft=!0):n()&&!h()?(this.vx=t(this.speed),this.faceLeft=!1):this.vx=0,this.walking=h()||n()}},{key:"faceLeft",get:function(){return!!this._faceLeft},set:function(t){this._faceLeft=!!t,this.element.classList.toggle("left",this.faceLeft)}},{key:"walking",get:function(){return!!this._walking},set:function(t){this._walking=!!t,this.element.classList.toggle("walk",this.walking)}},{key:"load",value:function(t,e){this.x=t,this.y=e}},{key:"toJSON",value:function(){return[Math.round(this.x),Math.round(this.y)]}}])}(),p=function(){function t(e,n,r,i,o){var s;return _classCallCheck(this,t),(s=_callSuper(this,t,[u("rect")])).width=r,s.height=i,s.x=e,s.y=n,s.on=o,s}return _inherits(t,l),_createClass(t,[{key:"on",get:function(){return!!this._on},set:function(t){this._on=!!t,this.element.classList.toggle("light",this.on),this.element.classList.toggle("dark",!this.on)}},{key:"toJSON",value:function(){return[Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height),Number(this.on)]}}])}(),w=0,y=1,b=2,f=[w,y,b],v=function(){function t(e){var n;return _classCallCheck(this,t),(n=_callSuper(this,t,[document.getElementById("title")])).game=e,n.items=[].slice.call(n.element.querySelectorAll(".menu .item")),n.selected=w,n}return _inherits(t,l),_createClass(t,[{key:"keydown",value:function(t){switch(t.key){case"ArrowUp":this.selected-=1;break;case"ArrowDown":this.selected+=1;break;case"Enter":this.choose()}}},{key:"choose",value:function(){switch(this.selected){case w:this.game.scene.index=0,this.game.scene.paused=!1,this.game.state="play";break;case b:this.game.state="edit";break;case y:this.game.state="controls"}}},{key:"selected",get:function(){return this._selected},set:function(t){var e=this;this._selected=Math.min(f.length-1,Math.max(0,t||0)),this.items.forEach((function(t,n){t.classList.toggle("selected",n===e.selected)}))}}])}(),x=440*Math.pow(Math.pow(2,1/12),-9),q=/^[0-9.]+$/,k=/\s+/,B=/(\d+)/,A={};"B#-C|C#-Db|D|D#-Eb|E-Fb|E#-F|F#-Gb|G|G#-Ab|A|A#-Bb|B-Cb".split("|").forEach((function(t,e){t.split("-").forEach((function(t){A[t]=e}))}));var E=function yt(t){var e=t.split(k);this.frequency=yt.getFrequency(e[0])||0,this.duration=yt.getDuration(e[1])||0};E.getFrequency=function(t){var e=t.split(B),n=A[e[0]],r=(e[1]||4)-4;return x*Math.pow(Math.pow(2,1/12),n)*Math.pow(2,r)},E.getDuration=function(t){return q.test(t)?parseFloat(t):t.toLowerCase().split("").reduce((function(t,e){return t+("w"===e?4:"h"===e?2:"q"===e?1:"e"===e?.5:"s"===e?.25:0)}),0)};var D=function(t,e,n){this.ac=t||new AudioContext,this.createFxNodes(),this.tempo=e||120,this.loop=!0,this.smoothing=0,this.staccato=0,this.notes=[],this.push.apply(this,n||[])};D.prototype.createFxNodes=function(){var t=this.gain=this.ac.createGain();return[["bass",100],["mid",1e3],["treble",2500]].forEach(function(e,n){(n=this[e[0]]=this.ac.createBiquadFilter()).type="peaking",n.frequency.value=e[1],t.connect(t=n)}.bind(this)),t.connect(this.ac.destination),this},D.prototype.push=function(){return Array.prototype.forEach.call(arguments,function(t){this.notes.push(t instanceof E?t:new E(t))}.bind(this)),this},D.prototype.createCustomWave=function(t,e){e||(e=t),this.waveType="custom",this.customWave=[new Float32Array(t),new Float32Array(e)]},D.prototype.createOscillator=function(){return this.stop(),this.osc=this.ac.createOscillator(),this.customWave?this.osc.setPeriodicWave(this.ac.createPeriodicWave.apply(this.ac,this.customWave)):this.osc.type=this.waveType||"square",this.osc.connect(this.gain),this},D.prototype.scheduleNote=function(t,e){var n=60/this.tempo*this.notes[t].duration,r=n*(1-(this.staccato||0));return this.setFrequency(this.notes[t].frequency,e),this.smoothing&&this.notes[t].frequency&&this.slide(t,e,r),this.setFrequency(0,e+r),e+n},D.prototype.getNextNote=function(t){return this.notes[t<this.notes.length-1?t+1:0]},D.prototype.getSlideStartDelay=function(t){return t-Math.min(t,60/this.tempo*this.smoothing)},D.prototype.slide=function(t,e,n){var r=this.getNextNote(t),i=this.getSlideStartDelay(n);return this.setFrequency(this.notes[t].frequency,e+i),this.rampFrequency(r.frequency,e+n),this},D.prototype.setFrequency=function(t,e){return this.osc.frequency.setValueAtTime(t,e),this},D.prototype.rampFrequency=function(t,e){return this.osc.frequency.linearRampToValueAtTime(t,e),this},D.prototype.play=function(t){return t="number"==typeof t?t:this.ac.currentTime,this.createOscillator(),this.osc.start(t),this.notes.forEach(function(e,n){t=this.scheduleNote(n,t)}.bind(this)),this.osc.stop(t),this.osc.onended=this.loop?this.play.bind(this,t):null,this},D.prototype.stop=function(){return this.osc&&(this.osc.onended=null,this.osc.disconnect(),this.osc=null),this};var G=new AudioContext,L=new D(G,100,["B2 q","- q","Db3 q","- q","D3 q","- q","Gb3 q","Bb3 q","B2 q","- q","Db3 q","- q","D3 q","- q","Gb3 q","B2 q","B2 q","- q","Db3 q","- q","D3 q","- q","Gb3 q","Bb3 q","B2 q","- q","Db3 q","- q","D3 q","- q","Gb3 q","B2 q","- 32"]),M=new D(G,100,["- w","- h","D3 q","Db3 q","- w","- h","D3 q","Gb3 q","- w","- h","D3 q","Db3 q","- w","- h","D3 q","Gb3 q","- 32"]),_=new D(G,100,["B4 e","- e","Bb4 e","- e","A4 s","A4 s","Ab4 e","G4 e","- e","Gb4 s","B4 s","Gb4 e","D4 e","B3 e","D4 e","- e","Db4 e","- e","B4 e","- e","Bb4 e","- e","A4 s","A4 s","Ab4 e","G4 e","- e","Gb4 s","B4 s","Gb4 e","D4 e","B3 e","D4 e","Db4 e","B3 e","- e","B4 e","- e","Bb4 e","- e","A4 s","A4 s","Ab4 e","G4 e","- e","Gb4 s","B4 s","Gb4 e","D4 e","B3 e","D4 e","- e","Db4 e","- e","B4 e","- e","Bb4 e","- e","A4 s","A4 s","Ab4 e","G4 e","- e","Gb4 s","B4 s","Gb4 e","D4 e","B3 e","D4 e","Db4 e","B3 e","- e","- 32"]),C=new D(G,100,["- 32","G3 e","E3 e","D3 e","C3 e","A2 e","G2 e","C2 e","Bb2 e","B2 e","Db3 e","D3 e","E3 e","Gb3 e","G3 e","Gb3 e","Bb2 e","G3 e","E3 e","D3 e","C3 e","A2 e","G2 e","C2 e","Bb2 e","B2 e","Db3 e","D3 e","E3 e","D3 e","Db3 e","B2 e","- e","G3 e","E3 e","D3 e","C3 e","A2 e","G2 e","C2 e","Bb2 e","B2 e","Db3 e","D3 e","E3 e","Gb3 e","G3 e","Gb3 e","Bb2 e","G3 e","E3 e","D3 e","C3 e","A2 e","G2 e","C2 e","Bb2 e","B2 e","Db3 e","D3 e","E3 e","D3 e","Db3 e","B2 e","- e"]),F=new D(G,100,["- 32","G4 w","Gb4 w","G4 w","Gb4 w","G4 w","Gb4 w","G4 w","Gb4 w"]),S=new D(G,100,["- 32","C4 w","D4 w","C4 w","D4 w","C4 w","D4 w","C4 w","D4 w"]),R=new D(G,200,["C3 q","- q","G3 q","- q","C3 q","- q","G3 q","G2 q","C3 q","- q","G3 q","- q","B2 q","- q","B2 q","A2 q","G2 q","- h","- q","E3 q","- h","- q","G2 q","- w","- h","B2 q"]),z=new D(G,200,["G4 e","Gb4 e","G4 e","Gb4 e","G4 q","A4 q","G4 h","C4 q","E4 q","G4 e","Gb4 e","G4 e","Gb4 e","G4 q","E4 q","F4 h","D4 q","E4 q","F4 e","E4 e","F4 e","E4 e","F4 q","G4 q","E4 e","D4 e","E4 e","D4 e","E4 q","F4 q","G3 e","A3 e","B3 e","C4 e","D4 e","E4 e","F4 e","E4 e","D4 e","C4 e","B3 e","A3 e","G3 q","E4 q"]);R.staccato=.3,z.staccato=.5,R.waveType="sine",R.gain.gain.value=.7,z.gain.gain.value=.3,L.staccato=.5,C.staccato=.3,M.staccato=.5,_.staccato=.5,L.waveType="sine",C.waveType="sine",M.waveType="sine",L.gain.gain.value=.4,C.gain.gain.value=.6,M.gain.gain.value=.4,_.gain.gain.value=.4;var N=1,U="up";setInterval((function(){"up"===U&&(N+=1)>9&&(U="down",N-=1),"down"===U&&(N-=1)<1&&(U="up",N+=2),F.gain.gain.value=.01*N,S.gain.gain.value=.01*N}),300);var I=function(){L.play(),M.play(),_.play(),C.play(),F.play(),S.play(),R.stop(),z.stop()},T=function(){L.stop(),M.stop(),_.stop(),C.stop(),F.stop(),S.stop(),R.play(),z.play()};I();var O=new D(G,320,["Bb3 e","G5 e","Bb4 e"]),J=new D(G,400,["Bb6 e","D6 e"]),P=new D(G,400,["D6 e","Bb6 e"]),W=new D(G,280,["C4 s","G4 s","C5 h"]),$=new D(G,280,["Bb3 e","Bb2 q"]);O.loop=!1,W.loop=!1,$.loop=!1,J.loop=!1,P.loop=!1,O.smoothing=1,$.smoothing=.5,W.staccato=.2,J.staccato=.5,P.staccato=.5,$.waveType="sawtooth",$.bass.gain.value=10,O.gain.gain.value=.3,W.gain.gain.value=.6,$.gain.gain.value=.4,J.gain.gain.value=.3,P.gain.gain.value=.3;var H=768,V=480,K=function(){function t(e){var n;return _classCallCheck(this,t),(n=_callSuper(this,t,[e])).value=0,n}return _inherits(t,l),_createClass(t,[{key:"value",get:function(){return this._value},set:function(t){this._value=t||0,this.element.innerHTML="";var e,n=0,r=_createForOfIteratorHelper(this.value.toString());try{for(r.s();!(e=r.n()).done;){var i=e.value,o=new l(u("rect"));o.element.setAttribute("fill","url(#n".concat(i,")")),o.width=10,o.height=16,o.x=12*n++,this.append(o)}}catch(s){r.e(s)}finally{r.f()}}}])}(),j=function(){function t(e,n,r,i,o,s){var a;return _classCallCheck(this,t),(a=_callSuper(this,t,[u("svg")])).rect=u("rect"),a.rect.setAttribute("x","0"),a.rect.setAttribute("y","0"),a.rect.setAttribute("width","100%"),a.rect.setAttribute("height","100%"),a.element.appendChild(a.rect),a.width=r,a.height=i,a.x=e,a.y=n,a.on=o,a.direction=s,a}return _inherits(t,l),_createClass(t,[{key:"isUp",get:function(){return"up"===this.direction}},{key:"isDown",get:function(){return"down"===this.direction}},{key:"isLeft",get:function(){return"left"===this.direction}},{key:"isRight",get:function(){return"right"===this.direction}},{key:"width",get:function(){return _superPropGet(t,"width",this,1)},set:function(e){_superPropSet(t,"width",e,this,1,1),(this.isUp||this.isDown)&&this.element.setAttribute("width",16*Math.round(this.width/16))}},{key:"height",get:function(){return _superPropGet(t,"height",this,1)},set:function(e){_superPropSet(t,"height",e,this,1,1),(this.isLeft||this.isRight)&&this.element.setAttribute("height",16*Math.round(this.height/16))}},{key:"on",get:function(){return!!this._on},set:function(t){this._on=!!t,this.element.classList.toggle("light",this.on),this.element.classList.toggle("dark",!this.on)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=t,this.rect.setAttribute("fill","url(#spike-".concat(this.direction,")"))}},{key:"toJSON",value:function(){return[Math.round(this.x),Math.round(this.y),this.isUp||this.isDown?16*Math.round(this.width/16):this.width,this.isLeft||this.isRight?16*Math.round(this.height/16):this.height,Number(this.on),this.direction]}}])}(),X=function(){function t(e,n){var r;return _classCallCheck(this,t),(r=_callSuper(this,t,[document.getElementById(e)])).pressed=n,r}return _inherits(t,l),_createClass(t,[{key:"tick",value:function(){this.element.classList.toggle("dark",!this.pressed()),this.element.classList.toggle("light",this.pressed())}}])}(),Y=function(){function n(r){var i;return _classCallCheck(this,n),(i=_callSuper(this,n,[document.getElementById("controls")])).game=r,i.keys=[new X("key-w",(function(){return t.has("w")})),new X("key-a",(function(){return t.has("a")})),new X("key-d",(function(){return t.has("d")})),new X("key-space",(function(){return t.has(" ")})),new X("button-toggle",(function(){return e.has(1)})),new X("button-jump",(function(){return e.has(0)})),new X("button-left",(function(){return e.has(14)})),new X("button-right",(function(){return e.has(15)}))],i}return _inherits(n,l),_createClass(n,[{key:"keydown",value:function(t){switch(t.key){case"Enter":this.game.state="title";break;case"ArrowUp":case"ArrowDown":this.element.querySelector(".menu .item").classList.add("selected")}}},{key:"tick",value:function(){if(!this.hidden){var t,e=_createForOfIteratorHelper(this.keys);try{for(e.s();!(t=e.n()).done;){t.value.tick()}}catch(n){e.e(n)}finally{e.f()}}}}])}(),Q=3,Z=document.getElementById("editor"),tt=Z.createSVGPoint(),et=function(t){var e=t.clientX,n=t.clientY;return tt.x=e,tt.y=n,tt.matrixTransform(Z.getScreenCTM().inverse())},st=null,it=null;document.addEventListener("mouseup",(function(){st=it=null})),document.addEventListener("mousedown",(function(t){0===t.button&&(it=et(t))})),document.addEventListener("mousemove",(function(t){if(st){var e=et(t),n=e.x,r=e.y;st({x:n-it.x,y:r-it.y}),it={x:n,y:r}}})),document.getElementById("close-dialog").addEventListener("click",(function(){document.getElementById("dialog").hidden=!0}));var ht=function(){function t(){var e;_classCallCheck(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=_callSuper(this,t,[].concat(r))).element.addEventListener("dblclick",e.dblclick.bind(_assertThisInitialized(e))),e.element.addEventListener("mousemove",e.mousemove.bind(_assertThisInitialized(e))),e.element.addEventListener("mousedown",e.mousedown.bind(_assertThisInitialized(e))),e}return _inherits(t,p),_createClass(t,[{key:"dblclick",value:function(){this.on=!this.on}},{key:"mousemove",value:function(t){var e=et(t),n=e.x,r=e.y;this.element.style.cursor=this.cursor(this.region(n,r))}},{key:"mousedown",value:function(t){if(0===t.button){var e=et(t),n=e.x,r=e.y;st=this.resize.bind(this,this.region(n,r))}}},{key:"resize",value:function(t,e){var n=e.x,r=e.y;switch(t){case"m":this.x+=n,this.y+=r;break;case"n":this.y+=r,this.height-=r;break;case"s":this.height+=r;break;case"e":this.width+=n;break;case"w":this.x+=n,this.width-=n;break;case"nw":this.resize("n",{x:n,y:r}),this.resize("w",{x:n,y:r});break;case"ne":this.resize("n",{x:n,y:r}),this.resize("e",{x:n,y:r});break;case"sw":this.resize("s",{x:n,y:r}),this.resize("w",{x:n,y:r});break;case"se":this.resize("s",{x:n,y:r}),this.resize("e",{x:n,y:r})}}},{key:"region",value:function(t,e){return t-=this.x,e-=this.y,t<=Q?e<=Q?"nw":e<this.height-Q?"w":"sw":t<this.width-Q?e<=Q?"n":e<this.height-Q?"m":"s":e<=Q?"ne":e<this.height-Q?"e":"se"}},{key:"cursor",value:function(t){switch(t){case"n":case"s":return"ns-resize";case"e":case"w":return"ew-resize";case"nw":case"se":return"nwse-resize";case"ne":case"sw":return"nesw-resize";case"m":return"move"}}}])}(),nt=function(){function t(){var e;_classCallCheck(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=_callSuper(this,t,[].concat(r))).element.style.cursor="move",e.element.addEventListener("dblclick",e.dblclick.bind(_assertThisInitialized(e))),e.element.addEventListener("mousedown",e.mousedown.bind(_assertThisInitialized(e))),e.element.addEventListener("mousemove",e.mousemove.bind(_assertThisInitialized(e))),e}return _inherits(t,j),_createClass(t,[{key:"direction",get:function(){return _superPropGet(t,"direction",this,1)},set:function(e){_superPropSet(t,"direction",e,this,1,1),this.rect.setAttribute("fill","url(#edit-spike-".concat(this.direction,")"))}},{key:"dblclick",value:function(){this.on=!this.on}},{key:"mousemove",value:function(t){var e=et(t),n=e.x,r=e.y;this.element.style.cursor=this.cursor(this.region(n,r))}},{key:"mousedown",value:function(t){if(0===t.button){var e=et(t),n=e.x,r=e.y;st=this.resize.bind(this,this.region(n,r))}}},{key:"resize",value:function(t,e){var n=e.x,r=e.y;switch(t){case"n":this.y+=r,this.height-=r;break;case"s":this.height+=r;break;case"e":this.width+=n;break;case"w":this.x+=n,this.width-=n;break;case"m":this.x+=n,this.y+=r}}},{key:"region",value:function(t,e){return t-=this.x,e-=this.y,this.isUp||this.isDown?t<=Q?"w":t<this.width-Q?"m":"e":e<=Q?"n":e<this.height-Q?"m":"s"}},{key:"cursor",value:function(t){switch(t){case"n":case"s":return"ns-resize";case"e":case"w":return"ew-resize";case"m":return"move"}}}])}(),ot=function(){function t(){var e;_classCallCheck(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=_callSuper(this,t,[].concat(r))).element.style.cursor="move",e.element.addEventListener("mousedown",e.mousedown.bind(_assertThisInitialized(e))),e}return _inherits(t,m),_createClass(t,[{key:"mousedown",value:function(t){var e=this;0===t.button&&(st=function(t){var n=t.x,r=t.y;e.x+=n,e.y+=r})}}])}(),rt=function(){function t(){var e;_classCallCheck(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=_callSuper(this,t,[].concat(r))).element.style.cursor="move",e.element.addEventListener("mousedown",e.mousedown.bind(_assertThisInitialized(e))),e}return _inherits(t,g),_createClass(t,[{key:"mousedown",value:function(t){var e=this;0===t.button&&(st=function(t){var n=t.x,r=t.y;e.x+=n,e.y+=r})}}])}(),at=function(){function e(t,n){var r;return _classCallCheck(this,e),(r=_callSuper(this,e,[document.getElementById("editor")])).bars=[],r.spikes=[],r.levels=t,r.game=n,r.guy=new ot,r.append(r.guy),r.goal=new rt,r.append(r.goal),r.level=0,document.addEventListener("keydown",r.keydown.bind(_assertThisInitialized(r))),r}return _inherits(e,l),_createClass(e,[{key:"addBar",value:function(t){var e=this;this.bars.push(t),this.append(t),t.element.addEventListener("click",(function(n){n.shiftKey&&(t.remove(),e.bars=e.bars.filter((function(e){return e===t})))}))}},{key:"addSpike",value:function(t){var e=this;this.spikes.push(t),this.append(t),t.element.addEventListener("click",(function(n){n.shiftKey&&(t.remove(),e.spikes=e.spikes.filter((function(e){return e===t})))}))}},{key:"level",get:function(){return this._level},set:function(t){this._level=Math.max(0,Math.min(this.levels.length-1,t));var e=_slicedToArray(this.levels[this.level],4),n=e[0],r=e[1],i=e[2],o=e[3];for((s=this.guy).load.apply(s,_toConsumableArray(n)),(a=this.goal).load.apply(a,_toConsumableArray(r));this.bars.length;){var s,a;this.bars.pop().remove()}var u,c=_createForOfIteratorHelper(i);try{for(c.s();!(u=c.n()).done;){var h=u.value;this.addBar(_construct(ht,_toConsumableArray(h)))}}catch(y){c.e(y)}finally{c.f()}for(;this.spikes.length;)this.spikes.pop().remove();var l,f=_createForOfIteratorHelper(o);try{for(f.s();!(l=f.n()).done;){var d=l.value;this.addSpike(_construct(nt,_toConsumableArray(d)))}}catch(y){f.e(y)}finally{f.f()}}},{key:"keydown",value:function(e){var n=e.key;if(!this.hidden)switch(n){case"ArrowRight":this.level+=1;break;case"ArrowLeft":this.level-=1;break;case"p":this.addBar(new ht(0,0,48,48,!0));break;case"c":navigator.clipboard.writeText(JSON.stringify(this));break;case"u":case"d":case"l":case"r":if(!t.has("s"))return;this.addSpike("u"===n||"d"===n?new nt(0,0,64,8,!0,"u"===n?"up":"down"):new nt(0,0,8,64,!0,"l"===n?"left":"right"));break;case"h":document.getElementById("dialog").hidden=!document.getElementById("dialog").hidden;break;case"g":var r=new URL(window.location);r.searchParams.set("level",JSON.stringify(this)),window.location=r.toString();break;case"Escape":this.game&&(this.game.state="title")}}},{key:"toJSON",value:function(){return[this.guy,this.goal,this.bars,this.spikes]}}])}(),ct=function(){function t(e,n){var r;return _classCallCheck(this,t),(r=_callSuper(this,t,[document.getElementById("game")])).deaths=new K(document.getElementById("death-counter")),r.stars=new K(document.getElementById("level-counter")),r.congrats=new l(document.getElementById("congrats")),r.esc=new l(document.getElementById("esc")),r.game=e,r.levels=n,r.bars=[],r.spikes=[],r.paused=!1,r.guy=new m,r.append(r.guy),r.goal=new g,r.append(r.goal),r.index=0,r}return _inherits(t,l),_createClass(t,[{key:"fromURL",get:function(){return!!this._fromURL},set:function(t){this._fromURL=!!t,this.esc.hidden=!this.fromURL}},{key:"keydown",value:function(t){switch(t.key){case"Enter":this.finished&&(this.fromURL=!1,this.levels=c,this.game.state="title",I());break;case"Escape":this.fromURL&&(this.fromURL=!1,this.levels=c,this.game.state="title",I())}}},{key:"on",get:function(){return this._on},set:function(t){this._on=t,document.body.classList.toggle("on",t),document.body.classList.toggle("off",!t)}},{key:"index",get:function(){return this._index},set:function(t){var e,n;for(this._index=Math.min(this.levels.length,Math.max(t||0)),this.on=!0,this.stars.value=this.index;this.bars.length;)this.bars.pop().remove();for(;this.spikes.length;)this.spikes.pop().remove();if(this.finished)return this.guy.hidden=!0,this.congrats.hidden=!1,void T();var r=_slicedToArray(this.level,4),i=r[0],o=r[1],s=r[2],a=r[3];(e=this.guy).load.apply(e,_toConsumableArray(i)),this.guy.hidden=!1,(n=this.goal).load.apply(n,_toConsumableArray(o)),this.goal.hidden=!1,this.congrats.hidden=!0;var u,c=_createForOfIteratorHelper(s);try{for(c.s();!(u=c.n()).done;){var h=u.value,l=_construct(p,_toConsumableArray(h));this.append(l),this.bars.push(l)}}catch(v){c.e(v)}finally{c.f()}var f,d=_createForOfIteratorHelper(a);try{for(d.s();!(f=d.n()).done;){var y=f.value,g=_construct(j,_toConsumableArray(y));this.append(g),this.spikes.push(g)}}catch(v){d.e(v)}finally{d.f()}}},{key:"level",get:function(){return this.levels[this.index]}},{key:"finished",get:function(){return this.index>=this.levels.length}},{key:"advance",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return W.play(),this.paused=!0,document.body.classList.add("finish"),t.next=5,d(1e3);case 5:return this.index+=1,document.body.classList.remove("finish"),t.next=9,d(1e3);case 9:this.finished?this.goal.hidden=!0:this.paused=!1;case 10:case"end":return t.stop()}}),r,this)}))),function(){return n.apply(this,arguments)})},{key:"death",value:(e=_asyncToGenerator(_regeneratorRuntime().mark((function o(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $.play(),this.deaths.value+=1,this.paused=!0,(t=document.getElementById("death")).setAttribute("x",this.guy.x-32+this.guy.width/2),t.setAttribute("y",this.guy.y-32+this.guy.height/2),this.guy.element.setAttribute("hidden",!0),document.body.classList.add("dying"),e.next=8,d(700);case 8:document.body.classList.remove("dying"),this.reset(),this.guy.element.removeAttribute("hidden"),this.paused=!1;case 12:case"end":return e.stop()}}),o,this)}))),function(){return e.apply(this,arguments)})},{key:"reset",value:function(){var t;(t=this.guy).load.apply(t,_toConsumableArray(this.level[0]))}},{key:"lost",value:function(){var t=this;return this.guy.bottom>V||this.bars.some((function(e){return e.on===t.on&&e.overlaps(t.guy)}))||this.spikes.some((function(e){return e.on===t.on&&e.overlaps(t.guy)}))}},{key:"setBounds",value:function(t){var e=t.bounds;e.left=-t.left,e.right=H-t.right,e.top=-t.top,e.bottom=V-t.bottom+1;var n,r=_createForOfIteratorHelper(this.bars);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.on===this.on&&(i.top<t.bottom&&i.bottom>t.top&&(i.isRightOf(t)?e.right=Math.min(e.right,i.left-t.right):i.isLeftOf(t)&&(e.left=Math.max(e.left,i.right-t.left))),i.left<t.right&&i.right>t.left&&(i.isBelow(t)?e.bottom=Math.min(e.bottom,i.top-t.bottom):i.isAbove(t)&&(e.top=Math.max(e.top,i.bottom-t.top))))}}catch(o){r.e(o)}finally{r.f()}return e}},{key:"tick",value:function(t){if(!this.paused&&!this.hidden){this.guy.tick(t);var e=this.setBounds(this.guy),n=e.left,r=e.right;this.guy.x+=Math.min(r,Math.max(n,this.guy.vx));var o=this.setBounds(this.guy),s=o.top,a=o.bottom;this.guy.y+=Math.min(a,Math.max(s,this.guy.vy)),0===a?(this.guy.vy=i()?-t(1200):0,i()&&O.play()):this.guy.vy=Math.min(t(600),this.guy.vy+t(120)),this.lost()?this.death():this.guy.overlaps(this.goal)&&this.advance()}}}]);var e,n}(),dt=new(function(){return _createClass((function t(){_classCallCheck(this,t),this.title=new v(this),this.controls=new Y(this),this.scene=new ct(this,c),this.editor=new at([[[100,300],[500,300],[[84,361,362,48,1]],[[446,401,176,8,1,"up"]]]],this),this.dialog=document.getElementById("dialog"),r(1,this.toggle.bind(this)),document.addEventListener("keydown",this.keydown.bind(this))}),[{key:"toggle",value:function(){this.scene.on=!this.scene.on,this.scene.on?P.play():J.play()}},{key:"keydown",value:function(t){" "===t.key&&this.toggle(),this.scene.hidden?this.controls.hidden?this.title.hidden||this.title.keydown(t):this.controls.keydown(t):this.scene.keydown(t)}},{key:"state",get:function(){return this._state},set:function(t){this._state=t,this.scene.hidden="play"!==this.state,this.title.hidden="title"!==this.state,this.controls.hidden="controls"!==this.state,this.editor.hidden="edit"!==this.state,this.dialog.hidden="edit"!==this.state}},{key:"tick",value:function(t){this.scene.tick(t),this.controls.tick(t)}}])}()),lt=new URL(window.location).searchParams.get("level");if(lt)try{dt.scene.levels=[JSON.parse(lt)],dt.scene.fromURL=!0,dt.scene.index=0,dt.state="play"}catch(t){}var ut=0;requestAnimationFrame((function pt(t){var e=t-ut;dt.tick((function(t){return Math.round(t*e/1e3)})),ut=t,requestAnimationFrame(pt)}));</script></head><body class=on><svg id=title viewBox="0 0 768 480"><path class=light d="M188 192h40v-64h-40v64zm0 16h-16v-96h72v96h-56zm128-80h-40v80h-16v-96h72v96h-16v-80z"></path><path class=dark d="M540 128v24h40v16h-40v40h-16v-96h72v16h-56zm-88 24h40v16h-40v40h-16v-96h72v16h-56v24zm-48-24h-40v64h40v-64zm16 0v80h-72v-96h72v16z"></path><g class=menu><g class=item><path class=text d="M355 306v7h-4v-16h10v16h-2v-7h-4zm0-2h4v-5h-4v5zm56 2v7h-4v-16h10v16h-2v-7h-4zm0-2h4v-5h-4v5zm-44 2v7h-4v-16h10v9h-2v7h-2v-7h-2zm0-2h4v-5h-4v5zm36 2h-2v-2h4v9h-10v-16h10v2h-6v12h4v-5zm32-2h4v2h-4v5h6v2h-10v-16h10v2h-6v5zm-16-7h10v16h-2v-14h-1v14h-2v-14h-1v14h-4v-16zm-82 7v9h-10v-2h8v-5h-8v-9h10v2h-6v5h6zm5-5h-3v-2h10v2h-3v14h-4v-14zm36 0h-3v-2h10v2h-3v14h-4v-14z"></path><path class=stars d="M457 308.4l-3.1 1.5h-.6a.5.5 0 0 1-.2-.5l.6-3.3-2.5-2.4a.5.5 0 0 1-.2-.5c0-.2.3-.4.5-.4l3.4-.5 1.6-3a.6.6 0 0 1 1 0l1.6 3 3.4.5c.2 0 .4.2.5.4 0 .2 0 .4-.2.5l-2.5 2.4.6 3.3c0 .2 0 .4-.2.5h-.6l-3.1-1.5zm-146 0l-3.1 1.5h-.6a.5.5 0 0 1-.2-.5l.6-3.3-2.5-2.4a.5.5 0 0 1-.2-.5c0-.2.3-.4.5-.4l3.4-.5 1.6-3a.6.6 0 0 1 1 0l1.6 3 3.4.5c.2 0 .4.2.5.4 0 .2 0 .4-.2.5l-2.5 2.4.6 3.3c0 .2 0 .4-.2.5h-.6l-3.1-1.5z"></path></g><g class=item><path class=text d="M389 338v7h-4v-16h10v9h-2v7h-2v-7h-2zm0-2h4v-5h-4v5zm-28-7h10v16h-2v-14h-4v14h-4v-16zm70 7v9h-10v-2h8v-5h-8v-9h10v2h-6v5h6zm-55-5h-3v-2h10v2h-3v14h-4v-14zm-35 0v12h6v2h-10v-16h10v2h-6zm12 0v12h4v-12h-4zm-4-2h10v16h-10v-16zm52 2v12h4v-12h-4zm-4-2h10v16h-10v-16zm16 14h6v2h-10v-16h4v14z"></path><path class=stars d="M447 341.4l-3.1 1.5h-.6a.5.5 0 0 1-.2-.5l.6-3.3-2.5-2.4a.5.5 0 0 1-.2-.5c0-.2.3-.4.5-.4l3.4-.5 1.6-3a.6.6 0 0 1 1 0l1.6 3 3.4.5c.2 0 .4.2.5.4 0 .2 0 .4-.2.5l-2.5 2.4.6 3.3c0 .2 0 .4-.2.5h-.6l-3.1-1.5zm-126 0l-3.1 1.5h-.6a.5.5 0 0 1-.2-.5l.6-3.3-2.5-2.4a.5.5 0 0 1-.2-.5c0-.2.3-.4.5-.4l3.4-.5 1.6-3a.6.6 0 0 1 1 0l1.6 3 3.4.5c.2 0 .4.2.5.4 0 .2 0 .4-.2.5l-2.5 2.4.6 3.3c0 .2 0 .4-.2.5h-.6l-3.1-1.5z"></path></g><g class=item><path class=text d="M413 373v7h-4v-16h10v9h-2v7h-2v-7h-2zm0-2h4v-5h-4v5zm-60 0h4v2h-4v5h6v2h-10v-16h10v2h-6v5zm23 7v-12h-3v-2h10v2h-3v12h3v2h-10v-2h3zm12-12h-3v-2h10v2h-3v14h-4v-14zm13 0v12h4v-12h-4zm0-2h6v16h-10v-16h4zm-36 2v12h4v-12h-4zm0-2h6v16h-10v-16h4z" opacity=.2></path><path class=stars d="M435 376.4l-3.1 1.5h-.6a.5.5 0 0 1-.2-.5l.6-3.3-2.5-2.4a.5.5 0 0 1-.2-.5c0-.2.3-.4.5-.4l3.4-.5 1.6-3a.6.6 0 0 1 1 0l1.6 3 3.4.5c.2 0 .4.2.5.4 0 .2 0 .4-.2.5l-2.5 2.4.6 3.3c0 .2 0 .4-.2.5h-.6l-3.1-1.5zm-102 0l-3.1 1.5h-.6a.5.5 0 0 1-.2-.5l.6-3.3-2.5-2.4a.5.5 0 0 1-.2-.5c0-.2.3-.4.5-.4l3.4-.5 1.6-3a.6.6 0 0 1 1 0l1.6 3 3.4.5c.2 0 .4.2.5.4 0 .2 0 .4-.2.5l-2.5 2.4.6 3.3c0 .2 0 .4-.2.5h-.6l-3.1-1.5z"></path></g></g><path class=dark d="M175 443h-6v-2h6v-5h-8v-2h10v16h-10v-2h8v-5zm122 5h6v-5h-6v5zm-2 0v-14h10v16h-10v-2zm2-7h6v-5h-6v5zm-30-5h-8v-2h10v9h-8v5h8v2h-10v-9h8v-5zm-108 12v-12h-4v-2h6v14h4v2h-10v-2h4zm128 0v-12h-4v-2h6v14h4v2h-10v-2h4zm-8-14h2v16h-10v-16h8zm0 2h-6v12h6v-12zm-72 7v7h-4v-16h10v16h-2v-7h-4zm0-2h4v-5h-4v5zm154 2v7h-4v-16h10v16h-2v-7h-4zm0-2h4v-5h-4v5zm80 2v7h-4v-16h10v16h-2v-7h-4zm0-2h4v-5h-4v5zm62 2v7h-4v-16h10v16h-2v-7h-4zm0-2h4v-5h-4v5zm80 2v7h-4v-16h10v16h-2v-7h-4zm0-2h4v-5h-4v5zm-234 2v7h-4v-16h10v9h-2v7h-2v-7h-2zm0-2h4v-5h-4v5zm104 2v7h-4v-16h10v9h-2v7h-2v-7h-2zm0-2h4v-5h-4v5zm142 2v7h-4v-16h10v9h-2v7h-2v-7h-2zm0-2h4v-5h-4v5zm-412 0h4v2h-4v7h-4v-16h4v7zm16 2h-2v-2h4v9h-10v-16h10v2h-6v12h4v-5zm32-2h4v2h-4v5h6v2h-10v-16h10v2h-6v5zm308 0h4v2h-4v5h6v2h-10v-16h10v2h-6v5zm-134 7h4v-14h2v16h-10v-16h4v14zm12-14h6v16h-2v-14h-4v14h-4v-16h4zm98 0h6v16h-2v-14h-4v14h-4v-16h4zm104 0h6v16h-2v-14h-4v14h-4v-16h4zm-400 0h6v16h-2v-14h-1v14h-2v-14h-1v14h-4v-16h4zm352 0h6v16h-2v-14h-1v14h-2v-14h-1v14h-4v-16h4zm-418 14v2h-10v-2h8v-5h-8v-9h10v2h-6v5h6v7zm96 0v2h-10v-2h8v-5h-8v-9h10v2h-6v5h6v7zm-112 0v-12h-6v-2h10v16h-10v-9h2v7h4zm389 0v-12h-3v-2h10v2h-3v12h3v2h-10v-2h3zm80 0v-12h-3v-2h10v2h-3v12h3v2h-10v-2h3zm-269-12v12h4v-12h-4zm0-2h6v16h-10v-16h4zm92 2v12h4v-12h-4zm0-2h6v16h-10v-16h4zm202 2v12h4v-12h-4zm0-2h6v16h-10v-16h4zm-140 2v12h4v-12h-4zm0-2h6v16h-10v-16h4zm-98 2v12h4v-12h-4zm0-2h6v16h-10v-16h4zm-20 2v12h4v-12h-4zm0-2h6v16h-10v-16h4zm178 14h6v2h-10v-16h4v14zm-364-14h2v7h-2v-7zm0 9h2v7h-2v-7zm246-2v2h-4v-2h4zm-92 0v2h-4v-2h4zm-66-1h2v4h-2v-4zm194-2h8v8h-8v-8zm-154 0h8v8h-8v-8z"></path></svg> <svg id=controls viewBox="0 0 768 480" hidden=""><g id=gamepad-controls><g id=button-toggle class=dark><path d="M500 137v-12h-24v24h24v-8h4v12h-32v-32h32v16h43v2h-59v-2z"></path><path d="M601 139h-2v-2h4v9h-10v-16h10v2h-6v12h4v-5zm-12 0h-2v-2h4v9h-10v-16h10v2h-6v12h4v-5zm32-2h4v2h-4v5h6v2h-10v-16h10v2h-6v5zm-12 7h6v2h-10v-16h4v14zm-30 2h-10v-16h10v16zm-2-2v-12h-4v12h4zm-17-12h-3v-2h10v2h-3v14h-4v-14z"></path></g><g id=button-jump class=dark><path d="M450 125h-12v24h24v-24h-8v-4h12v32h-32v-32h16v-20h97v2h-95v36h-2z"></path><path d="M597 103v7h-4V94h10v9h-6zm0-2h4v-5h-4v5zm-24 7h4V94h2v16h-10V94h4v14zm8-14h10v16h-2V96h-1v14h-2V96h-1v14h-4V94zm-18 14V96h-6v-2h10v16h-10v-9h2v7h4z"></path></g><path id=button-left class=dark d="M193 122v7h-4v-16h10v2h-6v5h4v2h-4zm-12-2h4v2h-4v5h6v2h-10v-16h10v2h-6v5zm23-5h-3v-2h10v2h-3v14h-4v-14zm-35 12h6v2h-10v-16h4v14zm99 4h18v4h-22v-11h4v7zm-4-11v-13h22v4h-18v9h10v2h-59v-2h45z"></path><path id=button-right class=dark d="M158 78v7h-4V69h10v9h-2v7h-2v-7h-2zm0-2h4v-5h-4v5zm36 0h4v-7h2v16h-2v-7h-4v7h-4V69h4v7zm-8 2h-2v-2h4v9h-10V69h10v2h-6v12h4v-5zm-17 5V71h-3v-2h10v2h-3v12h3v2h-10v-2h3zm36-12h-3v-2h10v2h-3v14h-4V71zm117 40h-8v-4h8V76H219v-2h105v48h-2v-11zm10 20v-20h-6v-4h10v28h-22v-4h18z"></path><path class=dark d="M379 135h-20v4h20v-4zm2-2v8h-24v-8h24z"></path><path class=dark d="M409 135h-20v4h20v-4zm2-2v8h-24v-8h24z"></path><path class=dark d="M314 131v26h-28v-26h4v22h20v-22h4zm0-46v26h-4V89h-20v22h-4V85h28z"></path><path class=dark d="M246 175h276v-34h8v42H238v-59h8v51zM528 51h2v50h-8V67H246v7h-8V51h143V0h6v51h141zM238 78h8v42h-8V78zm284 27h8v32h-8v-32z"></path></g><g id=keyboard-controls><g id=key-w class=dark><path d="M268 276h-24v24h24v-24zm4-4v32h-32v-32h32z"></path><path d="M273 255v7h-4v-16h10v9h-6zm0-2h4v-5h-4v5zm-24 7h4v-14h2v16h-10v-16h4v14zm8-14h10v16h-2v-14h-1v14h-2v-14h-1v14h-4v-16zm-18 14v-12h-6v-2h10v16h-10v-9h2v7h4z"></path><path d="M255 294h1v-14h2v14h1v-14h2v16h-10v-16h4v14z"></path></g><g id=key-a class=dark><path d="M174 325v7h-4v-16h10v2h-6v5h4v2h-4zm-12-2h4v2h-4v5h6v2h-10v-16h10v2h-6v5zm23-5h-3v-2h10v2h-3v14h-4v-14zm-35 12h6v2h-10v-16h4v14z"></path><path d="M232 312h-24v24h24v-24zm4-4v32h-32v-32h32z"></path><path d="M219 325v7h-4v-16h10v16h-2v-7h-4zm0-2h4v-5h-4v5z"></path></g><g id=key-d class=dark><path d="M304 312h-24v24h24v-24zm4-4v32h-32v-32h32z"></path><path d="M291 318v12h4v-12h-4zm-4-2h10v16h-10v-16z"></path><path d="M324 325v7h-4v-16h10v9h-2v7h-2v-7h-2zm0-2h4v-5h-4v5zm36 0h4v-7h2v16h-2v-7h-4v7h-4v-16h4v7zm-8 2h-2v-2h4v9h-10v-16h10v2h-6v12h4v-5zm-17 5v-12h-3v-2h10v2h-3v12h3v2h-10v-2h3zm36-12h-3v-2h10v2h-3v14h-4v-14z"></path></g><path class=dark d="M268 312h-24v24h24v-24zm4-4v32h-32v-32h32z"></path><g id=key-space class=dark><path d="M560 312H440v24h120v-24zm4-4v32H436v-32h128z"></path><path d="M499 325v7h-4v-16h10v16h-2v-7h-4zm0-2h4v-5h-4v5zm-12 2v7h-4v-16h10v9h-6zm0-2h4v-5h-4v5zm36 0h4v2h-4v5h6v2h-10v-16h10v2h-6v5zm-42 0v9h-10v-2h8v-5h-8v-9h10v2h-6v5h6zm30-5v12h6v2h-10v-16h10v2h-6z"></path><path d="M509 361h-2v-2h4v9h-10v-16h10v2h-6v12h4v-5zm-12 0h-2v-2h4v9h-10v-16h10v2h-6v12h4v-5zm32-2h4v2h-4v5h6v2h-10v-16h10v2h-6v5zm-12 7h6v2h-10v-16h4v14zm-32 0v-12h-4v12h4zm2 2h-10v-16h10v16zm-19-14h-3v-2h10v2h-3v14h-4v-14z"></path></g></g><g class=menu><g class=item><path class=text d="M333 441v7h-4v-16h10v16h-2v-7h-4zm0-2h4v-5h-4v5zm24 0h4v2h-4v7h-4v-16h4v7zm64 0h4v2h-4v5h6v2h-10v-16h10v2h-6v5zm24 7h4v-14h2v16h-10v-16h4v14zm-16-14h10v16h-2v-14h-4v14h-4v-16zm-24 0h10v16h-2v-14h-1v14h-2v-14h-1v14h-4v-16zm-29 2h-3v-2h10v2h-3v14h-4v-14zm-31 0v12h6v2h-10v-16h10v2h-6zm-24 0v12h4v-12h-4zm-4-2h10v16h-10v-16zm72 2v12h4v-12h-4zm-4-2h10v16h-10v-16zm-24 0h2v7h-2v-7zm0 9h2v7h-2v-7zm-36-2v2h-4v-2h4z"></path><path class=stars d="M467 443.5l-3.7 1.9.7-4.1-3-2.9 4.1-.6 1.9-3.8 1.9 3.8 4.1.6-3 2.9.7 4.1zM301 443.5l-3.7 1.9.7-4.1-3-2.9 4.1-.6 1.9-3.8 1.9 3.8 4.1.6-3 2.9.7 4.1z"></path></g></g></svg> <svg id=game viewBox="0 0 768 480" hidden=""><defs><pattern id=spike-up width=16 height=10 patternUnits=userSpaceOnUse><polygon points="8 0 16 8 0 8"></polygon></pattern><pattern id=spike-down width=16 height=10 patternUnits=userSpaceOnUse><polygon points="0 0 16 0 8 8"></polygon></pattern><pattern id=spike-left width=10 height=16 patternUnits=userSpaceOnUse><polygon points="8 0 8 16 0 8"></polygon></pattern><pattern id=spike-right width=10 height=16 patternUnits=userSpaceOnUse><polygon points="0 0 8 8 0 16"></polygon></pattern></defs><svg id=congrats hidden=""><path class=light d="M300 158h-30v60h-12v-72h54v72h-12v-60zm54 24h24v36h-54v-72h54v12h-42v48h30v-12h-12v-12zm114 12v24h-12v-72h54v72h-12v-24h-30zm-35 0v24h-12v-24h-19v24h-12v-72h54v48h-11zm197 0h-42v-48h54v12h-42v24h42v36h-54v-12h42v-12zm-75-36v60h-12v-60h-21v-12h54v12h-21zm-87 24h30v-24h-30v24zm-66 0h30v-24h-30v24zm-156 36h-54v-72h54v72zm-66-60h-42v48h42v12h-54v-72h54v12zm24 48h30v-48h-30v48z"></path><path class=light d="M333 353v7h-4v-16h10v16h-2v-7h-4zm0-2h4v-5h-4v5zm24 0h4v2h-4v7h-4v-16h4v7zm64 0h4v2h-4v5h6v2h-10v-16h10v2h-6v5zm24 7h4v-14h2v16h-10v-16h4v14zm-16-14h10v16h-2v-14h-4v14h-4v-16zm-24 0h10v16h-2v-14h-1v14h-2v-14h-1v14h-4v-16zm-29 2h-3v-2h10v2h-3v14h-4v-14zm-31 0v12h6v2h-10v-16h10v2h-6zm-24 0v12h4v-12h-4zm-4-2h10v16h-10v-16zm72 2v12h4v-12h-4zm-4-2h10v16h-10v-16zm-24 0h2v7h-2v-7zm0 9h2v7h-2v-7zm-36-2v2h-4v-2h4z"></path><g class=menu><g class="item selected"><path class=stars d="M467 355.5l-3.7 1.9.7-4.1-3-2.9 4.1-.6 1.9-3.8 1.9 3.8 4.1.6-3 2.9.7 4.1zM301 355.5l-3.7 1.9.7-4.1-3-2.9 4.1-.6 1.9-3.8 1.9 3.8 4.1.6-3 2.9.7 4.1z"></path></g></g></svg> <svg id=hud y=24><defs><pattern id=n0 width=10 height=16><path d="M2 2v12h6V2H2zM0 0h10v16H0V0zm4 6h2v4H4V6z"></path></pattern><pattern id=n1 width=10 height=16><path d="M4 14V2H0V0h6v14h4v2H0v-2h4z"></path></pattern><pattern id=n2 width=10 height=16><path d="M8 2H0V0h10v9H2v5h8v2H0V7h8z"></path></pattern><pattern id=n3 width=10 height=16><path d="M8 9H2V7h6V2H0V0h10v16H0v-2h8z"></path></pattern><pattern id=n4 width=10 height=16><path d="M8 9H0V0h2v7h6V0h2v16H8z"></path></pattern><pattern id=n5 width=10 height=16><path d="M10 7v9H0v-2h8V9H0V0h10v2H2v5z"></path></pattern><pattern id=n6 width=10 height=16><path d="M2 14h6V9H2v5zm-2 2V0h10v2H2v5h8v9H0z"></path></pattern><pattern id=n7 width=10 height=16><path d="M8 2H0V0h10v16H8z"></path></pattern><pattern id=n8 width=10 height=16><path d="M2 14h6V9H2v5zm-2 2V0h10v16H0zm2-9h6V2H2v5z"></path></pattern><pattern id=n9 width=10 height=16><path d="M0 0h10v16H8V9H0V0zm8 2H2v5h6V2z"></path></pattern></defs><svg id=level x=24><path d="M8.7 13.6L4.2 16c-.3.2-.6.1-.9 0A.8.8 0 0 1 3 15l.9-4.8L.3 6.9a.8.8 0 0 1-.3-.8c.1-.3.4-.5.7-.6l5-.7L8 .4a.8.8 0 0 1 1.4 0l2.3 4.4 5 .7c.4 0 .6.3.7.6.1.3 0 .6-.2.8l-3.6 3.4.8 4.8c0 .3 0 .6-.3.7-.2.2-.6.3-.8.1l-4.6-2.3z" shape-rendering=auto></path><svg x=20><g id=level-counter></g></svg></svg> <svg id=deaths x=84><path d="M13 10v6h-2v-1H9v1H7v-1H5v1H3v-6H0V0h16v10h-3zM9 3v4h4V3H9zM3 3v4h4V3H3z"></path><svg x=20><g id=death-counter></g></svg></svg> <svg id=esc x=434 hidden=""><path d="M152 9h-2V7h4v9h-10V0h10v2h-6v12h4V9zM72 7h4v2h-4v5h6v2H68V0h10v2h-6v5zm18 0v9H80v-2h8V9h-8V0h10v2h-6v5h6zm6-5v12h6v2H92V0h10v2h-6zm64 0v12h4V2h-4zm-4-2h10v16h-10V0zm36 9v7h-4V0h10v16h-2V9h-4zm0-2h4V2h-4v5zm24 0h4v2h-4v7h-4V0h4v7zm64 0h4v2h-4v5h6v2h-10V0h10v2h-6v5zm24 7h4V0h2v16h-10V0h4v14zM288 0h10v16h-2V2h-4v14h-4V0zm-24 0h10v16h-2V2h-1v14h-2V2h-1v14h-4V0zm-29 2h-3V0h10v2h-3v14h-4V2zm-31 0v12h6v2h-10V0h10v2h-6zm-24 0v12h4V2h-4zm-4-2h10v16h-10V0zm72 2v12h4V2h-4zm-4-2h10v16h-10V0zM16 9v7h-4V0h10v9h-2v7h-2V9h-2zm0-2h4V2h-4v5zM4 9v7H0V0h10v9H4zm0-2h4V2H4v5zm24 0h4v2h-4v5h6v2H24V0h10v2h-6v5zm30 0v9H48v-2h8V9h-8V0h10v2h-6v5h6zM46 7v9H36v-2h8V9h-8V0h10v2h-6v5h6zm69-5h-3V0h10v2h-3v14h-4V2zm13 0v12h4V2h-4zm-4-2h10v16h-10V0zm96 0h2v7h-2V0zm0 9h2v7h-2V9zm-36-2v2h-4V7h4z"></path></svg></svg> <svg id=death><rect x=27 y=27 width=10 height=12 style="transform-origin:32px 32px"></rect><rect x=20 y=4 width=2 height=2 style="transform-origin:-10px 30px"></rect><rect x=0 y=28 width=2 height=2 style="transform-origin:7px 70px"></rect><rect x=37 y=12 width=2 height=2 style="transform-origin:15px 15px"></rect><rect x=5 y=42 width=2 height=2 style="transform-origin:30px 70px"></rect><rect x=48 y=53 width=2 height=2 style="transform-origin:60px 30px"></rect><rect x=55 y=26 width=2 height=2 style="transform-origin:37px 5px"></rect><rect x=10 y=15 width=2 height=2 style="transform-origin:-2px 55px"></rect><rect x=24 y=11 width=6 height=6 style="transform-origin:5px 32px"></rect><rect x=20 y=43 width=6 height=6 style="transform-origin:46px 51px"></rect><rect x=32 y=46 width=6 height=6 style="transform-origin:54px 37px"></rect><rect x=37 y=59 width=2 height=2 style="transform-origin:65px 41px"></rect><rect x=23 y=55 width=2 height=2 style="transform-origin:45px 51px"></rect><rect x=62 y=41 width=2 height=2 style="transform-origin:56px 6px"></rect><rect x=52 y=2 width=2 height=2 style="transform-origin:14px -13px"></rect><rect x=41 y=21 width=8 height=8 style="transform-origin:28px 15px"></rect><rect x=48 y=11 width=4 height=4 style="transform-origin:10px -4px"></rect><rect x=42 y=36 width=8 height=8 style="transform-origin:47px 19px"></rect><rect x=53 y=44 width=3 height=3 style="transform-origin:57px 16px"></rect><rect x=10 y=52 width=2 height=2 style="transform-origin:47px 66px"></rect><rect x=15 y=22 width=8 height=8 style="transform-origin:14px 44px"></rect><rect x=7 y=29 width=4 height=4 style="transform-origin:19px 56px"></rect><rect x=14 y=36 width=4 height=4 style="transform-origin:30px 55px"></rect></svg></svg> <svg id=editor viewBox="0 0 768 480" hidden=""><defs><pattern id=edit-spike-up width=16 height=10 patternUnits=userSpaceOnUse><polygon points="8 0 16 8 0 8"></polygon></pattern><pattern id=edit-spike-down width=16 height=10 patternUnits=userSpaceOnUse><polygon points="0 0 16 0 8 8"></polygon></pattern><pattern id=edit-spike-left width=10 height=16 patternUnits=userSpaceOnUse><polygon points="8 0 8 16 0 8"></polygon></pattern><pattern id=edit-spike-right width=10 height=16 patternUnits=userSpaceOnUse><polygon points="0 0 8 8 0 16"></polygon></pattern><pattern id=grid width=8 height=8 patternUnits=userSpaceOnUse><rect width=1 height=7 x=7 fill=red></rect><rect width=8 height=1 y=7 fill=red></rect></pattern></defs><rect class=grid x=0 y=0 width=100% height=100% fill=url(#grid) opacity=0.1></rect></svg><div id=dialog hidden=""><h3>说明</h3><ul><li><kbd>H</kbd> <span>显示这些说明</span></li><li><kbd>P</kbd> <span>打造新平台</span></li><li><kbd>S</kbd> + <kbd>U</kbd> <span>创建新的上升尖峰</span></li><li><kbd>S</kbd> + <kbd>D</kbd> <span>创建新的向下尖峰</span></li><li><kbd>S</kbd> + <kbd>L</kbd> <span>创建新的左尖峰</span></li><li><kbd>S</kbd> + <kbd>R</kbd> <span>创建新的右尖峰</span></li><li><kbd>SHIFT</kbd> + <code>点击</code> <span>移除平台/尖峰</span></li><li><kbd>G</kbd> <span>玩这个关卡</span></li><li><kbd>ESC</kbd> <span>返回菜单</span></li><li><code>双击</code> <span>切换平台层</span></li></ul><button type=button id=close-dialog>关闭说明</button></div></body></html>