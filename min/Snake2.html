<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>贪吃蛇-极简版</title><style>*{margin:0;padding:0}ul{list-style:none}.container{width:1000px;height:800px;margin:10px auto;background-color:#faebd7;position:relative}.food{width:20px;height:20px;background-color:#f08080;position:absolute}.snake_body .cube{position:absolute;width:20px;height:20px;background-color:#bff}.cube.head{background-color:#0493fa}</style></head><body><div class=container><ul class=snake_body></ul></div><script>function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_unsupportedIterableToArray(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=Array(r);t<r;t++)a[t]=e[t];return a}function _iterableToArrayLimit(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,n,o,i,l=[],s=!0,c=!1;try{if(o=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;s=!1}else for(;!(s=(a=o.call(t)).done)&&(l.push(a.value),l.length!==r);s=!0);}catch(e){c=!0,n=e}finally{try{if(!s&&null!=t["return"]&&(i=t["return"](),Object(i)!==i))return}finally{if(c)throw n}}return l}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var container=document.querySelector(".container"),ul_body=document.querySelector(".snake_body"),snake_arr=[{id:0,left:100,top:100,move_direction:"r"},{id:1,left:80,top:100},{id:2,left:60,top:100}];function render_snake(){arguments.length>0&&arguments[0]!==undefined&&arguments[0]&&(ul_body.innerHTML="");for(var e=snake_arr.length-1;e>=0;e--){var r=document.createElement("li");0==snake_arr[e].id?r.classList.add("cube","head"):snake_arr[e].id==snake_arr.length-1?(r.innerText=e,r.classList.add("cube")):(r.innerText="",r.classList.add("cube")),r.style.left=snake_arr[e].left+"px",r.style.top=snake_arr[e].top+"px",ul_body.append(r)}}function add_body(){for(var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1,r=0;r<e;r++){var t=snake_arr.length;snake_arr.push({id:t,left:snake_arr[t-1].left,top:snake_arr[t-1].top})}render_snake(!0)}function snake_move(){for(var e=snake_arr[0].move_direction,r=snake_arr.length-1;r>=1;r--)snake_arr[r].left=snake_arr[r-1].left,snake_arr[r].top=snake_arr[r-1].top;switch(e){case"l":snake_arr[0].left-=20;break;case"r":snake_arr[0].left+=20;break;case"u":snake_arr[0].top-=20;break;case"d":snake_arr[0].top+=20}render_snake(!0)}render_snake();var auto_move=setInterval(snake_move,100),lock=!1;function test_key(e){if(!lock){lock=!0;var r=snake_arr[0].move_direction,t="vertical";("level"!=(t="ArrowLeft"==e||"ArrowRight"==e?"level":"vertical")||"r"!=r&&"l"!=r)&&("vertical"!=t||"u"!=r&&"d"!=r)&&key_change_direction(e),setTimeout((function(){lock=!1}),50)}}function key_change_direction(e){switch(e){case"ArrowLeft":snake_arr[0].move_direction="l";break;case"ArrowRight":snake_arr[0].move_direction="r";break;case"ArrowUp":snake_arr[0].move_direction="u";break;case"ArrowDown":snake_arr[0].move_direction="d"}}var timer=null;function debounce(e){timer&&clearTimeout(timer),timer=setTimeout((function(){test_key(e)}),50)}function random_food(){var e=Math.floor(Math.random()*container.clientWidth/20),r=Math.floor(Math.random()*container.clientHeight/20),t=document.createElement("div");t.classList.add("food"),t.style.left=20*e+"px",t.style.top=20*r+"px",container.append(t)}function get_position(e){return[e.offsetLeft,e.offsetTop]}function eat_food(){var e,r=document.querySelector(".food"),t=_slicedToArray(get_position(r),2),a=t[0],n=t[1];e=setInterval((function(){var t=_slicedToArray(get_position(document.querySelector(".snake_body .head")),2),o=t[0],i=t[1];o==a&&i==n&&(clearInterval(e),r.parentElement.removeChild(r),random_food(),eat_food(),add_body(1))}),100)}window.addEventListener("keyup",(function(e){test_key(e.key)})),random_food(),eat_food();var container_w=container.offsetWidth,container_h=container.offsetHeight,test_failue=setInterval((function(){(snake_arr[0].left>=container_w||snake_arr[0].left<0||snake_arr[0].top>=container_h||snake_arr[0].top<0||test_body())&&(clearInterval(test_failue),clearInterval(auto_move))}),100);function test_body(){for(var e=snake_arr.length-1;e>0;e--)if(snake_arr[0].left==snake_arr[e].left&&snake_arr[0].top==snake_arr[e].top)return!0;return!1}</script></body></html>