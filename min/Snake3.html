<!DOCTYPE html><html lang=zh><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>贪吃蛇</title><style>*{margin:0;padding:0}.left{float:left}.right{float:right}.clear-fixed:after{content:"";display:table;clear:both}.container{width:800px;height:550px;position:absolute;top:20px;left:50%;margin-left:-400px}.container .header{width:100%;height:50px;font-size:25px}.container .header .score-panel{height:50px;text-align:center;line-height:50px}#canvas{width:800px;height:500px;background-color:#fff;border-radius:5px;border:1px solid orange}#game-over,#game-pause{display:none;position:absolute;left:50%;top:23px;width:800px;height:500px;border-radius:5px;background-color:rgba(0,0,0,.6);margin-left:-399px;text-align:center;z-index:5}#game-over .panel,#game-pause .panel{position:absolute;left:50%;right:50%;top:140px;width:220px;height:200px;border-radius:10px;background-color:#fff;margin-left:-110px;text-align:center;z-index:6}#again,#continue{display:inline-block;width:170px;height:50px;border-radius:10px;text-decoration:none;background-color:#9f8d77;color:#fff;font-size:36px}</style></head><body><div class=container><div class="score-panel left"><span>得分: </span><span id=score>0</span></div><canvas id=canvas width=800 height=500></canvas><div id=game-over><div class=panel><h1 id=state style=margin-top:5px></h1><a href=javascript:; id=again>再试一次</a></div></div><div id=game-pause><div class=panel><h1 id=state style="margin:35px 0;color:orange">暂停</h1><a href=javascript:; id=continue>继续</a></div></div><div>TIP: 通过键盘↑ ↓ ← → 键操作蛇移动，space键切换暂停</div></div><script>function $(t){return/^#\S+/.test(t)?document.querySelector(t):document.querySelectorAll(t)}function getRandom(t,a){var e=Math.max(t,a),n=Math.min(t,a);return parseInt(Math.random()*(e-n))+n}function fillRoundRect(t,a,e,n,r,o,l){if(2*o>n||2*o>r)return!1;t.save(),t.translate(a,e),this.drawRoundRectPath(t,n,r,o),t.fillStyle=l||"#000",t.fill(),t.restore()}function drawRoundRectPath(t,a,e,n){t.beginPath(0),t.arc(a-n,e-n,n,0,Math.PI/2),t.lineTo(n,e),t.arc(n,e-n,n,Math.PI/2,Math.PI),t.lineTo(0,n),t.arc(n,n,n,Math.PI,3*Math.PI/2),t.lineTo(a-n,0),t.arc(a-n,n,n,3*Math.PI/2,2*Math.PI),t.lineTo(a,e-n),t.closePath()}</script><script>!function(t){function i(t,i,h,o,n){this.x=t||0,this.y=i||0,this.width=h||20,this.height=o||20,this.color=n||"green"}i.prototype={randomXY:function(t,i){for(var h=getRandom(0,t.width/this.width),o=getRandom(0,t.height/this.height),n=0;n<i.length;n++){var s=i[n].x,r=i[n].y;if(h===s&&o===r)return this.randomXY(t,i)}return{x:h,y:o}},generFood:function(t,i){var h=this.randomXY(t,i),o=h.x,n=h.y;this.x=o*this.width,this.y=n*this.height},draw:function(t){fillRoundRect(t,this.x,this.y,this.width,this.height,10,this.color)}},t.Food=i}(window);</script><script>!function(t){function i(t,i,h){this.width=t||20,this.height=i||20,this.dir=h||"right",this.body=[{x:3,y:2,color:"red"},{x:2,y:2,color:"blue"},{x:1,y:2,color:"blue"}]}i.prototype={move:function(t,i){for(var h=this.body.length-1;h>0;h--)this.body[h].x=this.body[h-1].x,this.body[h].y=this.body[h-1].y;var o=this.body[0];switch(this.dir){case"right":o.x+=1;break;case"left":o.x-=1;break;case"top":o.y-=1;break;case"bottom":o.y+=1}var s=o.x*this.width,y=o.y*this.height;if(s===t.x&&y===t.y){var r=this.body[this.body.length-1];this.body.push({x:r.x,y:r.y,color:r.color}),t.generFood(i,this.body)}},draw:function(t){for(var i=this.body.length-1;i>=0;i--){var h=this.body[i];fillRoundRect(t,h.x*this.width,h.y*this.height,this.width,this.height,5,h.color)}}},t.Snake=i}(window);</script><script>!function(t,e){function s(t){this.map=$(t||"#canvas"),this.ctx=this.map.getContext("2d"),this.init()}s.prototype={init:function(){this.timerId=null,this.score=0,this.isOver=!1,this.isPaused=!1,this.food=new Food,this.snake=new Snake,this.food.generFood(this.map,this.snake.body),this.draw()},start:function(){var t=this;this.timerId=setInterval((function(){t.snake.move(t.food,t.map);var e=t.map.width/t.snake.width,s=t.map.height/t.snake.height,i=t.snake.body[0].x,a=t.snake.body[0].y;i<0||i>=e||a<0||a>=s?t.gameOver():(t.draw(),t.updateScore())}),150)},draw:function(){this.ctx.clearRect(0,0,this.map.width,this.map.height),this.snake.draw(this.ctx),this.food.draw(this.ctx)},togglePause:function(){this.isPaused=!this.isPaused,this.isPaused?(clearInterval(this.timerId),$("#game-pause").style.display="block"):($("#game-pause").style.display="none",this.start())},keypress:function(t){if(this.isOver)return!1;switch(t.keyCode){case 37:this.snake.dir="right"==this.snake.dir?"right":"left";break;case 38:this.snake.dir="bottom"==this.snake.dir?"bottom":"top";break;case 39:this.snake.dir="left"==this.snake.dir?"left":"right";break;case 40:this.snake.dir="top"==this.snake.dir?"top":"bottom";break;case 32:this.togglePause()}},updateScore:function(){this.score=10*(this.snake.body.length-3),$("#score").innerText=this.score},gameOver:function(){this.isOver=!0,clearInterval(this.timerId),$("#state").innerHTML="游戏结束<br>得分:<br>"+this.score,$("#state").style.color="red",$("#game-over").style.display="block"}},t.onload=function(){var t=new s("#canvas");t.start(),$("#again").onclick=function(){$("#game-over").style.display="none",t.init(),t.start()},$("#continue").onclick=function(){t.togglePause()},e.addEventListener("keydown",(function(e){t.keypress(e)}))},t.Game=s}(window,document);</script></body></html>