<!DOCTYPE html><html lang=zh><head><meta charset=UTF-8><title>贪吃蛇</title><style type=text/css>*{margin:0;padding:0;font-family:"Microsoft YaHei"}#page{margin-right:auto;margin-left:auto;margin-top:20px;height:600px;width:980px}#yard{width:800px;border:1px solid gray;box-shadow:0 0 10px #000;float:right}#mark{font-weight:800}#mark_con{color:red}button{width:50px}a{text-decoration:none}</style><script type=text/javascript>var BLOCK_SIZE=20,COLS=40,ROWS=30,snakes=[],c=null,toGo=3,snakecount=4,interval=null,foodX=0,foodY=0,oMark=null,isPause=!1;function draw(){c.clearRect(0,0,BLOCK_SIZE*COLS,BLOCK_SIZE*ROWS);for(var e=1;e<=ROWS;e++)c.beginPath(),c.moveTo(0,e*BLOCK_SIZE),c.lineTo(BLOCK_SIZE*COLS,e*BLOCK_SIZE),c.strokeStyle="gray",c.stroke();for(e=1;e<=COLS;e++)c.beginPath(),c.moveTo(e*BLOCK_SIZE,0),c.lineTo(e*BLOCK_SIZE,BLOCK_SIZE*ROWS),c.stroke();for(e=0;e<snakes.length;e++)c.beginPath(),c.fillStyle="green",c.fillRect(snakes[e].x,snakes[e].y,BLOCK_SIZE,BLOCK_SIZE),c.moveTo(snakes[e].x,snakes[e].y),c.lineTo(snakes[e].x+BLOCK_SIZE,snakes[e].y),c.lineTo(snakes[e].x+BLOCK_SIZE,snakes[e].y+BLOCK_SIZE),c.lineTo(snakes[e].x,snakes[e].y+BLOCK_SIZE),c.closePath(),c.strokeStyle="red",c.stroke();c.beginPath(),c.fillStyle="yellow",c.fillRect(foodX,foodY,BLOCK_SIZE,BLOCK_SIZE),c.moveTo(foodX,foodY),c.lineTo(foodX+BLOCK_SIZE,foodY),c.lineTo(foodX+BLOCK_SIZE,foodY+BLOCK_SIZE),c.lineTo(foodX,foodY+BLOCK_SIZE),c.closePath(),c.strokeStyle="red",c.stroke()}function start(){for(var e=0;e<snakecount;e++)snakes[e]={x:e*BLOCK_SIZE,y:0};addFood(),oMark.innerHTML=0}function move(){switch(toGo){case 1:snakes.push({x:snakes[snakecount-1].x-BLOCK_SIZE,y:snakes[snakecount-1].y});break;case 2:snakes.push({x:snakes[snakecount-1].x,y:snakes[snakecount-1].y-BLOCK_SIZE});break;case 3:snakes.push({x:snakes[snakecount-1].x+BLOCK_SIZE,y:snakes[snakecount-1].y});break;case 4:snakes.push({x:snakes[snakecount-1].x,y:snakes[snakecount-1].y+BLOCK_SIZE})}snakes.shift(),isEat(),isDie(),draw()}function isEat(){snakes[snakecount-1].x==foodX&&snakes[snakecount-1].y==foodY&&(oMark.innerHTML=(parseInt(oMark.innerHTML)+1).toString(),addFood(),addSnake())}function addSnake(){snakecount++,snakes.unshift({x:BLOCK_SIZE*COLS,y:BLOCK_SIZE*ROWS})}function keydown(e){switch(e){case 37:1!=toGo&&3!=toGo&&(toGo=1);break;case 38:2!=toGo&&4!=toGo&&(toGo=2);break;case 39:3!=toGo&&1!=toGo&&(toGo=3);break;case 40:4!=toGo&&2!=toGo&&(toGo=4);break;case 80:isPause?(interval=setInterval(move,200),isPause=!1,document.getElementById("pause").innerHTML="Pause"):(clearInterval(interval),isPause=!0,document.getElementById("pause").innerHTML="Start")}}function addFood(){foodX=Math.floor(Math.random()*(COLS-1))*BLOCK_SIZE,foodY=Math.floor(Math.random()*(ROWS-1))*BLOCK_SIZE}function isDie(){-20!=snakes[snakecount-1].x&&snakes[snakecount-1].x!=BLOCK_SIZE*COLS&&-20!=snakes[snakecount-1].y&&snakes[snakecount-1].y!=BLOCK_SIZE*ROWS||(alert("Game Over!"),clearInterval(interval));for(var e=0;e<snakecount-1;e++)snakes[snakecount-1].x==snakes[e].x&&snakes[snakecount-1].y==snakes[e].y&&(clearInterval(interval),alert("Game Over!"))}window.onload=function(){c=document.getElementById("canvas").getContext("2d"),oMark=document.getElementById("mark_con"),start(),interval=setInterval(move,100),document.onkeydown=function(e){keydown((e=e||window.event).keyCode)}};</script></head><body><div id=page><div id=yard><canvas id=canvas height=600px width=800px></canvas></div><div id=help><div id=mark>得分：<span id=mark_con></span></div></div></div><div style=text-align:center><p>来源:<a href=http://www.mycodes.net/ target=_blank>源码之家</a></p></div></body></html>